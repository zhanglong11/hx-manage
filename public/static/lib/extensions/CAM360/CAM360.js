/*!
 * LMV v7.9.0
 * 
 * Copyright 2019 Bimfish, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Bimfish, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Bimfish, Inc.
 * 
 * Bimfish Forge Viewer Usage Limitations:
 * 
 * The Bimfish Forge viewer can only be used to view files generated by
 * Bimfish Forge services. The Bimfish Forge Viewer JavaScript must be
 * delivered from an Bimfish hosted URL.
 */
Bimfish.Extensions.CAM360=function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./extensions/CAM360/CAM360.js")}({"./extensions/CAM360/CAM360.js":
/*!*************************************!*\
  !*** ./extensions/CAM360/CAM360.js ***!
  \*************************************/
/*! exports provided: CAM360Extension */function(e,t,i){"use strict";i.r(t),i.d(t,"CAM360Extension",(function(){return n}));var o=i(/*! ./CAMModelStructurePanel */"./extensions/CAM360/CAMModelStructurePanel.js");function n(e,t){Bimfish.Viewing.Extension.call(this,e,t),this.name="cam360"}n.prototype=Object.create(Bimfish.Viewing.Extension.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this.viewer,t=new o.CAMModelStructurePanel(this.viewer,"CAM Model Structure Loading",{});return this.viewer.getExtension("Bimfish.ModelStructure").setModelStructurePanel(t),e.hideLines(!1),e.setGhosting(!1),e.setQualityLevel(!1,!0),e.addEventListener(Bimfish.Viewing.GEOMETRY_LOADED_EVENT,(function t(){e.impl.setLightPreset(0,!0),e.removeEventListener(Bimfish.Viewing.GEOMETRY_LOADED_EVENT,t)})),!0},n.prototype.unload=function(){this.viewer.getExtension("Bimfish.ModelStructure").restoreDefaultPanel()},n.prototype.activate=function(){return this.viewer.activateExtension("Bimfish.ModelStructure")},n.prototype.deactivate=function(){return this.viewer.deactivateExtension("Bimfish.ModelStructure")},n.prototype.isActive=function(){return this.viewer.isExtensionActive("Bimfish.ModelStructure")},Bimfish.Viewing.theExtensionManager.registerExtension("Bimfish.CAM360",n)},"./extensions/CAM360/CAMModelStructurePanel.js":
/*!*****************************************************!*\
  !*** ./extensions/CAM360/CAMModelStructurePanel.js ***!
  \*****************************************************/
/*! exports provided: CAMModelStructurePanel */function(e,t,i){"use strict";i.r(t),i.d(t,"CAMModelStructurePanel",(function(){return n}));var o=Bimfish.Viewing.Extensions;function n(e,t,i){o.ViewerModelStructurePanel.call(this,e,t,i),this.viewer=e,this.delegate=null,this.instanceTree=null,this.model=null,this.camNodes=[],this.camModelNodes=[],this.camSetupNodes=[],this.camStockNodes=[],this.camOperationNodes=[],this.camToolNodes=[],this.camFolderNodes=[]}n.prototype=Object.create(o.ViewerModelStructurePanel.prototype),n.prototype.constructor=n,n.prototype.sortCamNodes=function(e,t){var i=this,o=[];e.enumNodeChildren(e.getRootId(),(function(e){o.push(e)}),!0),o.shift(),function e(){var n,r;o.length>0?(n=o.shift(),r=e,i.viewer.getProperties(n,(function(e){var t=function(e,t){for(var i=0;i<e.length;++i){var o=e[i];if(o.displayName===t)return o.displayValue}return null}(e.properties,"9429B915-D020-4CEB-971B-6ADD0A5D4BFA");t?("CAM_Setup"==t?i.camSetupNodes.push(n):"CAM_Operation"==t?i.camOperationNodes.push(n):"CAM_Tool"===t?i.camToolNodes.push(n):"CAM_Stock"===t?i.camStockNodes.push(n):"CAM_Folder"==t&&i.camFolderNodes.push(n),i.camNodes.push(n)):i.camModelNodes.push(n),r()}),(function(e,t,i){r()}))):t()}()},n.prototype.addModel=function(e){this.model=e,this.setVisible(!0),o.ViewerModelStructurePanel.prototype.addModel.call(this,e)},n.prototype.setInstanceTree=function(e,t){if(o.ViewerModelStructurePanel.prototype.setInstanceTree.call(this,e,t),t){this.delegate=e,this.instanceTree=t;var i=this;i.sortCamNodes(t,(function(){i.SetCAMNodeVisible(!1),i.setVisible(!0),i.ExpandSetupNodes(),i.resizeToContent()}))}},n.prototype.initialize=function(){o.ViewerModelStructurePanel.prototype.initialize.call(this);var e=this;this.viewer.model&&this.viewer.model.isLoadDone()||e.addEventListener(e.viewer,Bimfish.Viewing.GEOMETRY_LOADED_EVENT,(function t(i){e.SetCAMNodeVisible(!1),e.removeEventListener(e.viewer,Bimfish.Viewing.GEOMETRY_LOADED_EVENT,t)})),e.addEventListener(e.viewer,Bimfish.Viewing.SHOW_EVENT,(function(t){var i=t.nodeIdArray;if(i)for(var o=0;o<i.length;o++)e.setCamNodeVisibility(i[o])})),e.addEventListener(e.viewer,Bimfish.Viewing.SELECTION_CHANGED_EVENT,(function(t){var i=t.nodeArray;if(i)for(var o=0;o<i.length;o++)e.HideHightlightCAMNode(i[o])})),e.addEventListener(e.viewer,Bimfish.Viewing.ISOLATE_EVENT,(function(t){var i=t.nodeIdArray;if(i)if(0==i.length)e.SetModelVisible(),e.SetCAMNodeVisible(!0);else for(var o=0;o<i.length;o++)e.setCamNodeVisibility(i[o])}))},n.prototype.IsCAMNode=function(e){return-1!==this.camNodes.indexOf(e)},n.prototype.IsCAMSetupNode=function(e){return-1!==this.camSetupNodes.indexOf(e)},n.prototype.IsCAMStockNode=function(e){return-1!==this.camStockNodes.indexOf(e)},n.prototype.IsCAMToolNode=function(e){return-1!==this.camToolNodes.indexOf(e)},n.prototype.IsCAMOperationNode=function(e){return-1!==this.camOperationNodes.indexOf(e)},n.prototype.IsCAMFolderNode=function(e){return-1!==this.camFolderNodes.indexOf(e)},n.prototype.shouldInclude=function(e){return!this.IsCAMStockNode(e)},n.prototype.isGroupNode=function(e){return!this.IsCAMOperationNode(e)&&o.ViewerModelStructurePanel.prototype.isGroupNode.call(this,e)},n.prototype.setNodeVisibility=function(e,t){t?this.viewer.show(e):this.viewer.hide(e)},n.prototype.SetModelVisible=function(){if(this.camModelNodes)for(var e=0;e<this.camModelNodes.length;e++)this.setNodeVisibility(this.camModelNodes[e],!0)},n.prototype.SetCAMNodeVisible=function(e){if(this.camNodes){for(var t=0;t<this.camNodes.length;t++)this.setNodeVisibility(this.camNodes[t],e);this.SetToolNodeVisible(!1)}},n.prototype.SetToolNodeVisible=function(e){if(this.camToolNodes)for(var t=0;t<this.camToolNodes.length;t++)this.setNodeVisibility(this.camToolNodes[t],e)},n.prototype.HideHightlightNode=function(e){var t=this.viewer.impl,i=this;i.instanceTree.enumNodeFragments(e,(function(e){t.highlightFragment(i.model,e,!1,!0)}),!0)},n.prototype.HideHightlightCAMNode=function(e){var t=this.IsCAMSetupNode(e),i=this.IsCAMOperationNode(e),o=this.IsCAMFolderNode(e),n=this;n.instanceTree.enumNodeChildren(e,(function(e){t?n.IsCAMStockNode(e)||n.HideHightlightNode(e):i?n.IsCAMToolNode(e)&&n.HideHightlightNode(e):o&&n.HideHightlightNode(e)}),!1)},n.prototype.setCamNodeVisibility=function(e){var t=this.IsCAMSetupNode(e),i=this.IsCAMOperationNode(e),o=this.IsCAMFolderNode(e),n=this;t?this.instanceTree.enumNodeChildren(e,(function(e){var t=n.IsCAMStockNode(e);n.setNodeVisibility(e,t)})):i?this.instanceTree.enumNodeChildren(e,(function(e){n.IsCAMToolNode(e)&&n.setNodeVisibility(e,!1)})):o&&this.instanceTree.enumNodeChildren(e,(function(e){n.setNodeVisibility(e,!1)}))},n.prototype.onClick=function(e,t){o.ViewerModelStructurePanel.prototype.onClick.call(this,e,t),this.SetModelVisible(),this.setCamNodeVisibility(e),this.viewer.fitToView()},n.prototype.ExpandSetupNodes=function(){if(this.camSetupNodes)for(var e=0;e<this.camSetupNodes.length;e++)this.tree.setCollapsed(this.delegate,this.camSetupNodes[e],!1)}}});