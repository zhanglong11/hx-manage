/*!
 * LMV v7.9.0
 * 
 * Copyright 2019 Bimfish, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Bimfish, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Bimfish, Inc.
 * 
 * Bimfish Forge Viewer Usage Limitations:
 * 
 * The Bimfish Forge viewer can only be used to view files generated by
 * Bimfish Forge services. The Bimfish Forge Viewer JavaScript must be
 * delivered from an Bimfish hosted URL.
 */
Bimfish.Extensions.CompGeom=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./extensions/CompGeom/index.js")}({"./extensions/CompGeom/complex-polygon.js":
/*!************************************************!*\
  !*** ./extensions/CompGeom/complex-polygon.js ***!
  \************************************************/
/*! exports provided: ComplexPolygon */function(t,e,n){"use strict";n.r(e),n.d(e,"ComplexPolygon",(function(){return h}));var i=n(/*! ./poly2tri */"./extensions/CompGeom/poly2tri.js"),o=n(/*! ./interval-tree */"./extensions/CompGeom/interval-tree.js"),r=n(/*! ./x-line-line */"./extensions/CompGeom/x-line-line.js");function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=Bimfish.Viewing.Private;a.logger;var h=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pts=e,this.contours=[],this.customInsideChecker=n,this.bbox=i}var e,n,h;return e=t,(n=[{key:"addContour",value:function(t){this.contours.push(t)}},{key:"pointInContour",value:function(t,e,n){var i,o,r,s,a,h,u=!1,l=this.pts;r=l[n[n.length-1]].x,i=(s=l[n[n.length-1]].y)>=e;for(var p=0,d=n.length;p<d;++p)a=l[n[p]].x,i!=(o=(h=l[n[p]].y)>=e)&&(h-e)*(r-a)>=(a-t)*(s-h)==o&&(u=!u),i=o,r=a,s=h;return u}},{key:"pointInPolygon",value:function(t,e){for(var n=!1,i=0;i<this.contours.length;i++)this.pointInContour(t,e,this.contours[i])&&(n=!n);return n}},{key:"triangulate",value:function(){try{this.triangulateInternal()}catch(t){if(-1!==t.message.indexOf("Collinear not supported!"))try{this.triangulateInternal(!0)}catch(t){this.triangulationFailed=!0}else this.triangulationFailed=!0}}},{key:"createPointInPolygonChecker",value:function(){for(var t=[],e=0;e<this.contours.length;e++)for(var n=this.contours[e],i=n.length,r=0;r<i-1;r++){var s={p1:n[r],p2:n[r+1]};t.push(s)}var a=new o.IntervalTree(this.pts,t,this.bbox);a.build(),this.customInsideChecker=a}},{key:"triangulateInternal",value:function(t){if(!this.contours.length)return this.triangulationFailed=!0,void(this.indices=null);this.indices=[];var e=function(t,e){for(var n=e.size(),i=e.min.x+.5*n.x,o=e.min.y+.5*n.y,r=2/n.length(),s=[],a=0,h=t.length;a<h;a++)s.push({x:(t[a].x-i)*r,y:(t[a].y-o)*r,_triidx:a+1});return s}(this.pts,this.bbox);t&&function(t){for(var e=0,n=t.length;e<n;e++)t[e].x+=1e-9*(Math.random()-.5),t[e].y+=1e-9*(Math.random()-.5)}(e);var n=new i.SweepContext([]);n.points_=e;for(var o=0;o<this.contours.length;o++){for(var r=this.contours[o],s=r[0]!==r[r.length-1],a=s?r.length:r.length-1,h=new Array(a),u=0;u<a;u++)h[u]=e[r[u]];n.initEdges(h,s)}n.triangulate(),this.processResult(n),this.triangulationFailed=!this.indices||!this.indices.length}},{key:"processResult",value:function(t){this.pts.length>10&&!this.customInsideChecker&&this.createPointInPolygonChecker();for(var e=t.map_,n=0;n<e.length;n++){var i=e[n].points_,o=i[0],r=i[1],s=i[2],a=o._triidx,h=r._triidx,u=s._triidx;a&&h&&u&&this.filterFace(a-1,h-1,u-1)}}},{key:"filterFace",value:function(t,e,n){var i=this.pts[t],o=this.pts[e],r=this.pts[n],s=(i.x+o.x+r.x)/3,a=(i.y+o.y+r.y)/3;if(this.customInsideChecker?this.customInsideChecker.pointInPolygon(s,a):this.pointInPolygon(s,a)){var h=o.x-i.x,u=o.y-i.y,l=r.x-i.x;h*(r.y-i.y)-l*u>0?this.indices.push(t,e,n):this.indices.push(t,n,e)}}},{key:"findSegmentIntersections",value:function(t,e,n,i){if(!this.cachedEdges){this.cachedEdges=[];for(var o=0;o<this.contours.length;o++)for(var s=this.contours[o],a=0;a<s.length-1;a++){var h=this.pts[s[a]].x,u=this.pts[s[a]].y,l=this.pts[s[a+1]].x,p=this.pts[s[a+1]].y,d={v1:{x:h,y:u},v2:{x:l,y:p},dx:l-h,dy:p-u,length:Math.sqrt(Math.pow(h-l,2)+Math.pow(u-p,2))};this.cachedEdges.push(d)}}for(var c={v1:{x:t,y:e},v2:{x:n,y:i},dx:n-t,dy:i-e,length:Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))},f=1e-4*this.bbox.size().length(),g=[],v=0;v<this.cachedEdges.length;v++){var y=this.cachedEdges[v],x=Object(r.segmentsIntersect)(c,y,f);if(x&&x.status===r.ONE_INTERSECTION){var m={x:x.e1[0],y:x.e1[1]};m.d=Math.sqrt(Math.pow(m.x-t,2)+Math.pow(m.y-e,2)),g.push(m)}}return g.length&&(g.sort((function(t,e){return t.d-e.d})),g[0].d<f&&g.shift(),g.length&&Math.abs(g[g.length-1].d-c.length)<f&&g.pop()),g.length?g:null}},{key:"toPolygonMesh",value:function(t){if(this.polygonMesh)return this.polygonMesh;for(var e=this.pts,n=new THREE.BufferGeometry,i=new Float32Array(3*e.length),o=0;o<e.length;o++)i[3*o]=e[o].x,i[3*o+1]=e[o].y,i[3*o+2]=0;n.addAttribute("position",new THREE.BufferAttribute(i,3));for(var r=t?new Uint16Array(2*e.length):new Float32Array(3*e.length),s=0;s<e.length;s++)if(t){var a=.5*(0/Math.PI+1);r[2*s]=65535*a|0,r[2*s+1]=65535}else r[3*s]=0,r[3*s+1]=0,r[3*s+2]=1;n.addAttribute("normal",new THREE.BufferAttribute(r,t?2:3)),t&&(n.attributes.normal.bytesPerItem=2,n.attributes.normal.normalize=!0);var h=new Uint16Array(this.indices.length);return h.set(this.indices),n.addAttribute("index",new THREE.BufferAttribute(h,1)),n.streamingDraw=!0,n.streamingIndex=!0,this.polygonMesh=n,n}},{key:"toExtrudedMesh",value:function(t){if(this.extrudedMesh)return this.extrudedMesh;if(void 0===t&&(t=1),!this.indices)return null;for(var e=[],n=[],i=[],o=0,r=this.pts,s=0;s<r.length;s++)e.push(r[s].x,r[s].y,0),e.push(0,0,1);for(var h=this.indices,u=0;u<h.length;u+=3)n.push(h[u],h[u+1],h[u+2]);o+=r.length;for(var l=0;l<r.length;l++)e.push(r[l].x,r[l].y,-t),e.push(0,0,-1);for(var p=0;p<h.length;p+=3)n.push(o+h[p],o+h[p+2],o+h[p+1]);o+=r.length;for(var d=new Vector3,c=new Box3,f=0;f<this.contours.length;f++)for(var g=this.contours[f],v=0;v<g.length-1;v++){var y=this.pts[g[v]].x,x=this.pts[g[v]].y;d.set(y,x,0),c.expandByPoint(d);var m=this.pts[g[v+1]].x,b=this.pts[g[v+1]].y;d.set(m,b,0),c.expandByPoint(d),d.set(y,x,0-t),c.expandByPoint(d),d.set(x-b,m-y,0).normalize(),i.push(o,o+1,o,o+2,o+1,o+3,o+2,o+3),f>0?(e.push(y,x,0,-d.x,-d.y,-d.z,m,b,0,-d.x,-d.y,-d.z,y,x,0-t,-d.x,-d.y,-d.z,m,b,0-t,-d.x,-d.y,-d.z),n.push(o,o+3,o+2,o,o+1,o+3)):(e.push(y,x,0,d.x,d.y,d.z,m,b,0,d.x,d.y,d.z,y,x,0-t,d.x,d.y,d.z,m,b,0-t,d.x,d.y,d.z),n.push(o,o+2,o+3,o+0,o+3,o+1)),o+=4}var _=new Float32Array(e.length);_.set(e);var C=new Uint16Array(n.length);C.set(n);var E=new Uint16Array(i.length);E.set(i);var w={mesh:{vb:_,indices:C,iblines:E,vbstride:6,vblayout:{position:{offset:0,itemSize:3,bytesPerItem:4},normal:{offset:3,itemSize:3,bytesPerItem:4}},boundingBox:c,boundingSphere:{center:c.center(),radius:.5*c.size().length}}};return a.BufferGeometryUtils.meshToGeometry(w),w.geometry.streamingDraw=!0,w.geometry.streamingIndex=!0,this.extrudedMesh=w.geometry,this.extrudedMesh}}])&&s(e.prototype,n),h&&s(e,h),t}()},"./extensions/CompGeom/contour-set.js":
/*!********************************************!*\
  !*** ./extensions/CompGeom/contour-set.js ***!
  \********************************************/
/*! exports provided: polygonArea, ContourSet */function(t,e,n){"use strict";n.r(e),n.d(e,"polygonArea",(function(){return r})),n.d(e,"ContourSet",(function(){return a}));var i=n(/*! ./complex-polygon */"./extensions/CompGeom/complex-polygon.js");function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){if(t.length<3)return 0;var e=!1;t[0]!==t[t.length-1]&&(e=!0);for(var n=0,i=0,o=t.length-1;i<o;i++){var r=t[i],s=t[i+1];n+=r.x*s.y-s.x*r.y}if(e){var a=t[t.length-1],h=t[0];n+=a.x*h.y-h.x*a.y}return.5*n}var s=new THREE.Vector2,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contours=[],this.areas=[],this.bbox=new THREE.Box2,this.allPoints=this.pts=[],this.allPointsMap={}}var e,n,a;return e=t,(n=[{key:"addContour",value:function(t,e){var n=this;this.polygon=null,this.perimeterMem=void 0;var i=r(t);i<0&&(t.reverse(),i=Math.abs(i));var o=[];t.forEach((function(t,e){var i=t.id;void 0===i&&(i=n.contours.length+":"+e);var r=n.allPointsMap[i];void 0===r&&(r=n.allPoints.length,n.allPoints.push(t),n.allPointsMap[i]=r,s.set(t.x,t.y),n.bbox.expandByPoint(s)),o.push(r)})),0===i&&e||(this.contours.push(o),this.areas.push(i))}},{key:"addContourSet",value:function(t){var e=t.contours[0],n=t.allPoints,i=e.map((function(t){return n[t]}));this.addContour(i)}},{key:"triangulate",value:function(t){if(!this.polygon){var e=this.allPoints,n=new i.ComplexPolygon(e,t,this.bbox);n.contours=this.contours,n.triangulate(),this.polygon=n,this.triangulationFailed=this.polygon.triangulationFailed}}},{key:"area",value:function(){return this.areas[0]}},{key:"areaNet",value:function(){for(var t=this.areas[0],e=1;e<this.areas.length;e++)t-=this.areas[e];return t}},{key:"perimeter",value:function(){if(this.perimeterMem)return this.perimeterMem;for(var t=0,e=this.contours[0],n=0,i=e.length-1;n<i;n++){var o=e[n],r=e[n+1];t+=Math.sqrt((o.x-r.x)*(o.x-r.x)+(o.y-r.y)*(o.y-r.y))}return this.perimeterMem=t,t}},{key:"getThemeColor",value:function(){return{r:100*this.areas[0]%17/16,g:this.allPoints.length%23/22,b:100*this.perimeterMem%29/28}}},{key:"hash",value:function(){var t=this,e=[];return this.contours.forEach((function(n){var i=n.map((function(e){return t.allPoints[e].id}));i[0]===i[i.length-1]&&i.pop(),i.sort(),e.push(i)})),JSON.stringify(e)}},{key:"stitchContours",value:function(){this.areas=[];for(var t=[],e=0;e<this.contours.length;e++){var n=this.contours[e];n[0]!==n[n.length-1]&&t.push(n)}if(t.length)for(var i=!0;i;){i=!1;for(var o={},r=this.contours,s=0;s<r.length;s++){var a=r[s],h=a[0],u=a[a.length-1];h!==u&&(o[h]?o[h].push(-s-1):o[h]=[-s-1],o[u]?o[u].push(s):o[u]=[s])}for(var l in o){var p=o[l];if(2===p.length){var d=void 0;if(p[0]<0&&p[1]<0){var c=-p[0]-1,f=-p[1]-1;r[f].shift(),Array.prototype.push.apply(r[c].reverse(),r[f]),d=f}if(p[0]<0&&p[1]>0){var g=-p[0]-1,v=p[1];r[v].pop(),Array.prototype.push.apply(r[v],r[g]),d=g}if(p[0]>0&&p[1]<0){var y=p[0],x=-p[1]-1;r[y].pop(),Array.prototype.push.apply(r[y],r[x]),d=x}if(p[0]>0&&p[1]>0){var m=p[0],b=p[1];r[m].pop(),Array.prototype.push.apply(r[m],r[b].reverse()),d=b}void 0!==d&&(r.splice(d,1),i=!0);break}}}}},{key:"containsPointFrom",value:function(t){if(!t.polygon.indices||t.polygon.indices.length<3)return!1;var e=t.allPoints[t.polygon.indices[0]],n=t.allPoints[t.polygon.indices[1]],i=t.allPoints[t.polygon.indices[2]],o=(e.x+n.x+i.x)/3,r=(e.y+n.y+i.y)/3;return this.polygon&&this.polygon.pointInPolygon(o,r)}},{key:"toPolygonMesh",value:function(t){return this.polygon.toPolygonMesh(t)}},{key:"toExtrudedMesh",value:function(t){return this.polygon.toExtrudedMesh(t)}}])&&o(e.prototype,n),a&&o(e,a),t}()},"./extensions/CompGeom/dcel.js":
/*!*************************************!*\
  !*** ./extensions/CompGeom/dcel.js ***!
  \*************************************/
/*! exports provided: DCEL */function(t,e,n){"use strict";n.r(e),n.d(e,"DCEL",(function(){return f}));var i=n(/*! ./x-line-line */"./extensions/CompGeom/x-line-line.js"),o=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),r=n(/*! ./contour-set */"./extensions/CompGeom/contour-set.js"),s=n(/*! ./quad-tree */"./extensions/CompGeom/quad-tree.js"),a=n(/*! ./point-list */"./extensions/CompGeom/point-list.js");function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var p=Bimfish.Viewing.Private.logger,d=function(){function t(e,n){h(this,t),this.x=e,this.y=n,this.edges=[],this.dbIds=[],this.dbIdsChanged=!1}return l(t,[{key:"isDegenerate",value:function(){return this.edges.length<2}},{key:"addEdge",value:function(t){for(var e=0;e<this.edges.length;e++){var n=this.edges[e];if(n.v1===t.v1&&n.v2===t.v2)return n}return this.edges.push(t),t}},{key:"removeEdge",value:function(t){var e=this.edges.indexOf(t);e>=0?this.edges.splice(e,1):p.warn("Failed to find edge in vertex list")}},{key:"findEdgeTo",value:function(t){for(var e=0;e<this.edges.length;e++){var n=this.edges[e];if(n.getOppositeVertex(this)===t)return n}return null}},{key:"disconnect",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.getOppositeVertex(this).removeEdge(e)}var n=this.edges;return this.edges=[],n}},{key:"sortEdges",value:function(){var t=this;this.edges.sort((function(e,n){var i=e.angle;e.v1!==t&&(i-=Math.PI);var o=n.angle;return n.v1!==t&&(o-=Math.PI),i-o}))}},{key:"_canTraverse",value:function(t){return t.v1!==this||t.flagFwd?t.v2===this&&!t.flagRev&&(t.flagRev=1,!0):(t.flagFwd=1,!0)}},{key:"findUntraversedEdge",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];if(this._canTraverse(e))return e}return null}},{key:"findNextCCWEdge",value:function(t){var e=this.edges.indexOf(t);if(-1===e)return p.error("This edge isn't mine."),null;if(this.isDegenerate())return null;var n=(e+1)%this.edges.length,i=this.edges[n];return this._canTraverse(i)?i:null}}]),t}(),c=function(){function t(e,n,i){h(this,t);var r=!1;n.y<e.y?r=!0:n.y===e.y&&(r=n.x<e.x),r?(this.v1=n,this.v2=e):(this.v1=e,this.v2=n),this.dx=this.v2.x-this.v1.x,this.dy=this.v2.y-this.v1.y,this.length2=this.dx*this.dx+this.dy*this.dy,this.length=Math.sqrt(this.length2),this.angle=Math.atan2(this.dy,this.dx),this.angle<0&&(Object(o.isZero)(this.angle)?this.angle=0:Object(o.isEqual)(this.angle,-Math.PI)&&(this.angle=Math.PI),this.angle<0&&p.warn("Unexpected edge slope <0 :",this.angle)),this.id=i,this.minx=Math.min(this.v1.x,this.v2.x),this.miny=Math.min(this.v1.y,this.v2.y),this.maxx=Math.max(this.v1.x,this.v2.x),this.maxy=Math.max(this.v1.y,this.v2.y),this.flagFwd=0,this.flagRev=0,this.dbIdsCached=null}return l(t,[{key:"paramAlong",value:function(t,e){return((t-this.v1.x)*this.dx+(e-this.v1.y)*this.dy)/this.length2}},{key:"getOppositeVertex",value:function(t){return this.v1===t?this.v2:this.v2===t?this.v1:void p.warn("Edge does not own this vertex.")}},{key:"getDbIds",value:function(){if(!this.v1.dbIdsChanged&&!this.v2.dbIdsChanged)return this.dbIdsCached;for(var t=[],e=this.v1.dbIds,n=this.v2.dbIds,i=0;i<e.length;i++)-1!==n.indexOf(e[i])&&t.push(e[i]);return this.dbIdsCached=t,this.v1.dbIdsChanged=!1,this.v2.dbIdsChanged=!1,t}}]),t}(),f=function(){function t(e,n){h(this,t),this.bbox=e,this.boxSize=this.bbox.size().length(),this.precisionTolerance="number"==typeof n?n:o.TOL*this.boxSize,this.edges=[],this.verts=new a.UniquePointList(this.bbox,this.precisionTolerance,d,!0),this.quadTreeEdges=new s.QuadTree(this.bbox.min.x,this.bbox.min.y,this.bbox.max.x,this.bbox.max.y,this.precisionTolerance),this.nextEdgeId=1}return l(t,[{key:"_addVertex",value:function(t,e,n){return this.verts.findOrAddPoint(t,e,n)}},{key:"splitEdge",value:function(t,e){var n=[];n.push({x:t.v1.x,y:t.v1.y,u:0});for(var i=t.getDbIds(),r=0;r<e.length;r+=2){var s={x:e[r],y:e[r+1],u:t.paramAlong(e[r],e[r+1])};Object(o.isZero)(s.u)||Object(o.isEqual)(s.u,1)||n.push(s)}if(1!==n.length){n.push({x:t.v2.x,y:t.v2.y,u:1}),n.sort((function(t,e){return t.u-e.u})),this.removeDirectedEdge(t);for(var a=1;a<n.length;a++)this.addDirectedEdge(n[a-1].x,n[a-1].y,n[a].x,n[a].y,!0,i)}}},{key:"_enumNearEdges",value:function(t,e){this.quadTreeEdges.enumNearItems(t,e)}},{key:"addDirectedEdge",value:function(t,e,n,o,r,s){var a=this,h=this._addVertex(t,e,s),u=this._addVertex(n,o,s);if(h!==u&&!h.findEdgeTo(u)){var l=new c(h,u,this.nextEdgeId++),p=l.v1.addEdge(l);if(p!==l)return p;if(l.v2.addEdge(l),l.sourcePts=[t,e,n,o],this.edges[l.id]=l,this.quadTreeEdges.addItem(l),r)return p;var d=[],f={};for(var g in this._enumNearEdges(l,(function(t){var e=Object(i.segmentsIntersect)(t,l,a.precisionTolerance);e&&(e.e1&&e.e1.length&&(f[t.id]=e.e1),e.e2&&e.e2.length&&d.push.apply(d,e.e2))})),f)this.splitEdge(this.edges[parseInt(g)],f[g]);return d.length&&this.splitEdge(l,d),this.dirty=!0,p}}},{key:"removeDirectedEdge",value:function(t){t.v1.removeEdge(t),t.v2.removeEdge(t),this.edges[t.id]=void 0,this.quadTreeEdges.deleteItem(t)}},{key:"removeDanglingPolyline",value:function(t){for(;1===t.edges.length;){var e=t.edges[0],n=e.getOppositeVertex(t);this.removeDirectedEdge(e),t=n}}},{key:"cleanupFlatEdges",value:function(){var t=[];this.verts.forEach((function(e){if(e&&2===e.edges.length){var n=e.edges[0],i=e.edges[1],o=Math.abs(n.angle-i.angle);(o<.002||Math.abs(o-Math.PI)<.002)&&t.push(e);var r=n.getOppositeVertex(e),s=i.getOppositeVertex(e);if(r.findEdgeTo(s)).5*Math.abs(n.dx*i.dy-i.dx*n.dy)<.001&&t.push(e)}}));for(var e=0;e<t.length;e++){var n=t[e];if(2===n.edges.length){var i=n.edges[0],o=n.edges[1],r=i.getOppositeVertex(n),s=o.getOppositeVertex(n);this.removeDirectedEdge(i),this.removeDirectedEdge(o),this.verts.delete(n),this.addDirectedEdge(r.x,r.y,s.x,s.y,!0)}}if(t.length)return this.cleanupFlatEdges()}},{key:"_compactLists",value:function(){this.verts.compact();for(var t=[],e=0,n=this.edges.length;e<n;e++){var i=this.edges[e];i&&(i.oldid=i.id,i.flagFwd=0,i.flagRev=0,i.id=t.length,t.push(i))}this.edges=t}},{key:"_detectHolesNonZero",value:function(t){this.holes=[],this.outerPerimeter=this.closedAreas[this.closedAreas.length-1],this.outerPerimeter&&this.outerPerimeter.triangulate();for(var e=0,n=this.closedAreas.length-1;e<n;e++){for(var i=this.closedAreas[e],o=e-1;o>=0;o--){var r=this.closedAreas[o];if(i.containsPointFrom(r)){if(!r.isHole){i.isHole=!0,this.holes.push(i);break}i.addContourSet(r)}}i.isHole||i.triangulate(t)}for(var s=0,a=this.holes.length;s<a;s++){var h=this.holes[s];h.triangulate(t);for(var u=s-1;u>=0;u--){var l=this.holes[u];l.holeProcessFlag||h.containsPointFrom(l)&&(h.addContourSet(l),h.isHole=!1,l.holeProcessFlag=!0)}h.isHole||h.triangulate(t)}for(var p=[],d=0;d<this.closedAreas.length-1;d++){var c=this.closedAreas[d];c.isHole||(c.id=p.length,p.push(c))}this.closedAreas=p}},{key:"_detectHolesEvenOdd",value:function(t){var e=this.closedAreas;if(this.openAreas&&this.openAreas.length&&(e=e.concat(this.openAreas)),!e.length)return this.closedAreas=[],void(this.openAreas=null);for(var n={},i=0;i<e.length;i++){var o=e[i],s=o.hash();n[s]?0:n[s]=o}e=Object.values(n);for(var a=new r.ContourSet,h=0;h<e.length;h++)a.addContourSet(e[h]);a.triangulate(t||this.quadTreeEdges),a.triangulationFailed?this._detectHolesNonZero(t||this.quadTreeEdges):(this.closedAreas=[a],this.openAreas=[])}},{key:"finalize",value:function(t,e){this.cleanupFlatEdges(),this._compactLists(),this.verts.forEach((function(t){return t.sortEdges()}));var n=[],i=[];this.verts.forEach((function(t){var e=t.findUntraversedEdge();if(e){var o=[t],r=e.getOppositeVertex(t);do{if(o.push(r),!(e=r.findNextCCWEdge(e)))break;r=e.getOppositeVertex(r)}while(r&&r!==t);r===t?(o.push(t),n.push(o)):i.push(o)}})),this.closedAreas=[];for(var o=0,s=n.length;o<s;o++){var a=new r.ContourSet;a.addContour(n[o]),this.closedAreas.push(a)}if(this.closedAreas.sort((function(t,e){return t.area()-e.area()})),t?this._detectHolesEvenOdd(e):this._detectHolesNonZero(e),this.openAreas=[],i.length){for(var h=[],u=new r.ContourSet,l=0,p=i.length;l<p;l++)u.addContour(i[l]);u.stitchContours(),u.triangulate(),h.push(u),this.openAreas=h}}},{key:"deleteEdgesOnLine",value:function(t,e,n,o){var r=this,s=new d(t,e),a=new d(n,o),h=new c(s,a,-1),u={};for(var l in this._enumNearEdges(h,(function(t){var e=Object(i.segmentsIntersect)(t,h,r.precisionTolerance);e&&e.e1&&e.e1.length&&(u[t.id]=e.e1)})),u){var p=parseInt(l),f=this.edges[p];this.removeDirectedEdge(f),this.removeDanglingPolyline(f.v1),this.removeDanglingPolyline(f.v2)}this.dirty=!0}},{key:"deleteEdgesInRectangle",value:function(t,e,n,i){var o=Math.min(t,n),r=Math.min(e,i),s=Math.max(t,n),a=Math.max(e,i),h={};for(var u in this.quadTreeEdges.enumInBox(o,r,s,a,(function(t){h[t.id]=t})),h){var l=parseInt(u),p=this.edges[l];p&&(this.removeDirectedEdge(p),this.removeDanglingPolyline(p.v1),this.removeDanglingPolyline(p.v2))}this.dirty=!0}},{key:"findNearestVertex",value:function(t,e,n){"number"!=typeof n&&(n=this.precisionTolerance);var i=1/0,o=null;return this.verts.enumInBox(t-n,e-n,t+n,e+n,(function(n){var r=(n.x-t)*(n.x-t)+(n.y-e)*(n.y-e);r<i&&(i=r,o=n)})),i<=n*n?o:null}},{key:"findNearestPointOnEdge",value:function(t,e,n){"number"!=typeof n&&(n=this.precisionTolerance);var o={x:0,y:0,u:0,d:-1},r={x:0,y:0,d:1/0,e:null};return this.quadTreeEdges.enumInBox(t-n,e-n,t+n,e+n,(function(s){Object(i.pointOnLine)(t,e,s,!0,n,o)&&o.d<r.d&&(r.x=o.x,r.y=o.y,r.d=o.d,r.e=s)})),r.d<=n?r:null}}]),t}()},"./extensions/CompGeom/edge-set.js":
/*!*****************************************!*\
  !*** ./extensions/CompGeom/edge-set.js ***!
  \*****************************************/
/*! exports provided: EdgeSet */function(t,e,n){"use strict";n.r(e),n.d(e,"EdgeSet",(function(){return h}));var i=n(/*! ./interval-tree */"./extensions/CompGeom/interval-tree.js"),o=n(/*! ./point-list */"./extensions/CompGeom/point-list.js"),r=n(/*! ./complex-polygon */"./extensions/CompGeom/complex-polygon.js");function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=Bimfish.Viewing.Private,h=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=e,this.bbox=n,this.verts=new o.UniquePointList(n,i),this.polygon=null}var e,n,h;return e=t,(n=[{key:"getPointIndex",value:function(t,e){return this.verts.findOrAddPoint(t,e).id}},{key:"snapEdges",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.p1=this.getPointIndex(e.v1.x,e.v1.y),e.p2=this.getPointIndex(e.v2.x,e.v2.y)}}},{key:"sanitizeEdges",value:function(){for(var t={},e=[],n=0,i=this.edges.length;n<i;n++){var o=this.edges[n];if(o.p1!==o.p2){var r=Math.min(o.p1,o.p2)+":"+Math.max(o.p1,o.p2);!0!==t[r]&&(t[r]=!0,e.push(o))}}this.edges=e}},{key:"stitchContours",value:function(){this.contours=[];for(var t={},e=0;e<this.edges.length;e++){var n=this.edges[e];n.p1!==n.p2&&(void 0!==t[n.p1]?t[n.p1].push(n.p2):t[n.p1]=[n.p2],void 0!==t[n.p2]?t[n.p2].push(n.p1):t[n.p2]=[n.p1])}var i=[];for(var o in t)if(2!==t[o].length){a.logger.warn("Incomplete edge table");break}for(;;){var r=void 0;for(var o in t)if(t[o].length>1){r=o;break}if(!r)for(var o in t)if(t[o].length>0){r=o;break}if(!r)break;var s=-1,h=parseInt(r),u=t[r];for(i.push(h);u&&u.length;){var l=u.shift();if(l===s&&(l=u.shift()),void 0===l){delete t[h];break}i.push(l),(0==u.length||u[0]===s)&&delete t[h],s=h,h=l,u=t[l]}i.length&&(this.contours.push(i),i=[])}var p=[];for(e=0;e<this.contours.length;e++)(g=this.contours[e])[0]!==g[g.length-1]&&p.push(g);if(p.length)for(var d=!0;d;){d=!1;var c={},f=this.contours;for(e=0;e<f.length;e++){var g,v=(g=f[e])[0],y=g[g.length-1];v!==y&&(c[v]?c[v].push(-e-1):c[v]=[-e-1],c[y]?c[y].push(e):c[y]=[e])}for(var o in c){var x=c[o];if(2==x.length){var m=void 0;if(x[0]<0&&x[1]<0){var b=-x[0]-1;f[_=-x[1]-1].shift(),Array.prototype.push.apply(f[b].reverse(),f[_]),m=_}if(x[0]<0&&x[1]>0&&(b=-x[0]-1,f[_=x[1]].pop(),Array.prototype.push.apply(f[_],f[b]),m=b),x[0]>0&&x[1]<0){b=x[0];var _=-x[1]-1;f[b].pop(),Array.prototype.push.apply(f[b],f[_]),m=_}x[0]>0&&x[1]>0&&(b=x[0],_=x[1],f[b].pop(),Array.prototype.push.apply(f[b],f[_].reverse()),m=_),void 0!==m&&(f.splice(m,1),d=!0);break}}}}},{key:"cleanupFlatEdges",value:function(){for(var t=this.verts.pts,e=this.verts.precisionTolerance,n=0;n<this.contours.length;n++)for(var i=this.contours[n];;){for(var o=-1,r=1;r<i.length-1;r++){var s=i[r-1],a=i[r],h=i[r+1],u=t[s],l=t[a],p=t[h],d=l.x-u.x,c=l.y-u.y,f=p.x-l.x,g=p.y-l.y,v=Math.sqrt(d*d+c*c);if(v<e){o=r;break}var y=Math.sqrt(f*f+g*g);if(y<e){o=r;break}var x=(d/=v)*(f/=y)+(c/=v)*(g/=y);if(Math.abs(x-1)<.01){o=r;break}}if(o<0)break;i.splice(o,1)}}},{key:"triangulate",value:function(){var t=new i.IntervalTree(this.verts.pts,this.edges,this.bbox);t.build();var e=new r.ComplexPolygon(this.verts.pts,t,this.bbox);return e.contours=this.contours,e.triangulate(),e}}])&&s(e.prototype,n),h&&s(e,h),t}()},"./extensions/CompGeom/fuzzy-math.js":
/*!*******************************************!*\
  !*** ./extensions/CompGeom/fuzzy-math.js ***!
  \*******************************************/
/*! exports provided: TOL, isZero, isEqual */function(t,e,n){"use strict";n.r(e),n.d(e,"TOL",(function(){return i})),n.d(e,"isZero",(function(){return o})),n.d(e,"isEqual",(function(){return r}));var i=1e-6;function o(t){return Math.abs(t)<i}function r(t,e){return o(t-e)}},"./extensions/CompGeom/index.js":
/*!**************************************!*\
  !*** ./extensions/CompGeom/index.js ***!
  \**************************************/
/*! no static exports found */function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=Bimfish.Viewing,u=AutodeskNamespace("Bimfish.Viewing.Extensions.CompGeom");function l(e,n){for(var i in e)e.hasOwnProperty(i)&&(t.exports[i]=e[i],n[i]=e[i])}l(n(/*! ./contour-set */"./extensions/CompGeom/contour-set.js"),u),l(n(/*! ./edge-set */"./extensions/CompGeom/edge-set.js"),u),l(n(/*! ./dcel */"./extensions/CompGeom/dcel.js"),u),l(n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),u),l(n(/*! ./quad-tree */"./extensions/CompGeom/quad-tree.js"),u),l(n(/*! ./x-box-box */"./extensions/CompGeom/x-box-box.js"),u),l(n(/*! ./x-box-plane */"./extensions/CompGeom/x-box-plane.js"),u),l(n(/*! ./x-line-box */"./extensions/CompGeom/x-line-box.js"),u),l(n(/*! ./x-line-line */"./extensions/CompGeom/x-line-line.js"),u),l(n(/*! ./x-mesh-plane */"./extensions/CompGeom/x-mesh-plane.js"),u),l(n(/*! ./x-plane-segment */"./extensions/CompGeom/x-plane-segment.js"),u),l(n(/*! ./x-triangle-plane */"./extensions/CompGeom/x-triangle-plane.js"),u),l(n(/*! ./interval-tree */"./extensions/CompGeom/interval-tree.js"),u),l(n(/*! ./complex-polygon */"./extensions/CompGeom/complex-polygon.js"),u),l(n(/*! ./point-list */"./extensions/CompGeom/point-list.js"),u),l(n(/*! ./poly2tri */"./extensions/CompGeom/poly2tri.js"),u);var p=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,s(e).call(this,t,n))}var n,i,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,t),n=e,(i=[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}},{key:"activate",value:function(){return!0}},{key:"deactivate",value:function(){return!1}}])&&o(n.prototype,i),h&&o(n,h),e}(h.Extension);h.theExtensionManager.registerExtension("Bimfish.CompGeom",p)},"./extensions/CompGeom/interval-tree.js":
/*!**********************************************!*\
  !*** ./extensions/CompGeom/interval-tree.js ***!
  \**********************************************/
/*! exports provided: IntervalTree */function(t,e,n){"use strict";function i(){this.bbox=new THREE.Box2,this.left=null,this.right=null,this.node_edges=[]}function o(t,e,n){this.pts=t,this.edges=e,this.bbox=n,this.pipResult=!1}n.r(e),n.d(e,"IntervalTree",(function(){return o})),o.prototype.splitNode=function(t){if(!(t.bbox.min.y>=t.bbox.max.y||t.node_edges.length<3)){var e=.5*(t.bbox.min.y+t.bbox.max.y);t.left=new i,t.right=new i;for(var n=this.pts,o=t.node_edges,r=[],s=new THREE.Vector2,a=0;a<o.length;a++){var h=this.edges[o[a]],u=n[h.p1].y,l=n[h.p2].y;if(u>l){var p=u;u=l,l=p}var d=null;l<e?(t.left.node_edges.push(o[a]),d=t.left.bbox):u>e?(t.right.node_edges.push(o[a]),d=t.right.bbox):r.push(o[a]),d&&(s.set(n[h.p1].x,n[h.p1].y),d.expandByPoint(s),s.set(n[h.p2].x,n[h.p2].y),d.expandByPoint(s))}t.node_edges=r,t.left.node_edges.length&&this.splitNode(t.left),t.right.node_edges.length&&this.splitNode(t.right)}},o.prototype.build=function(){this.root=new i;for(var t=this.root.node_edges,e=0;e<this.edges.length;e++)t.push(e);this.root.bbox.copy(this.bbox),this.splitNode(this.root)},o.prototype.pointInPolygonRec=function(t,e,n){if(t.bbox.min.y<=n&&t.bbox.max.y>=n)for(var i=this.pts,o=t.node_edges,r=0,s=o.length;r<s;r++){var a=this.edges[o[r]],h=i[a.p1],u=h.x,l=h.y,p=l>=n,d=i[a.p2],c=d.x,f=d.y,g=f>=n;p!=g&&(f-n)*(u-c)>=(c-e)*(l-f)==g&&(this.pipResult=!this.pipResult)}var v=t.left;v&&v.bbox.min.y<=n&&v.bbox.max.y>=n&&this.pointInPolygonRec(v,e,n);var y=t.right;y&&y.bbox.min.y<=n&&y.bbox.max.y>=n&&this.pointInPolygonRec(y,e,n)},o.prototype.pointInPolygon=function(t,e){return this.pipResult=!1,this.pointInPolygonRec(this.root,t,e),this.pipResult}},"./extensions/CompGeom/point-list.js":
/*!*******************************************!*\
  !*** ./extensions/CompGeom/point-list.js ***!
  \*******************************************/
/*! exports provided: UniquePointList */function(t,e,n){"use strict";n.r(e),n.d(e,"UniquePointList",(function(){return a}));var i=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),o=n(/*! ./quad-tree */"./extensions/CompGeom/quad-tree.js"),r=n(/*! ./poly2tri */"./extensions/CompGeom/poly2tri.js");function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,n,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=e,this.boxSize=this.bbox.size().length(),"number"==typeof n?(this.precisionTolerance=n,this.scale=1/this.precisionTolerance):(this.precisionTolerance=i.TOL*this.boxSize,this.scale=1/this.precisionTolerance),this.precisionToleranceSq=this.precisionTolerance*this.precisionTolerance,this.snapBaseX=this.bbox.min.x,this.snapBaseY=this.bbox.min.y,this.pts=[],this.xymap=new Map,s&&(this.quadTreeVerts=new o.QuadTree(e.min.x,e.min.y,e.max.x,e.max.y,n)),this.vertexConstructor=r}var e,n,a;return e=t,(n=[{key:"findOrAddPoint",value:function(t,e,n){for(var i,o=0|(t-this.snapBaseX)*this.scale,s=0|(e-this.snapBaseY)*this.scale,a=1/0,h=o-1;h<=o+1;h++){var u=this.xymap.get(h);if(u)for(var l=s-1;l<=s+1;l++){var p=u.get(l);if(p){var d=(p.x-t)*(p.x-t)+(p.y-e)*(p.y-e);d<a&&(i=p,a=d)}}}if(a>this.precisionToleranceSq&&(i=void 0),void 0===i){var c=this.xymap.get(o);c||(c=new Map,this.xymap.set(o,c)),i=this.vertexConstructor?new this.vertexConstructor(t,e):new r.Point(t,e),c.set(s,i),i.id=this.pts.length,this.pts.push(i),this.quadTreeVerts&&this.quadTreeVerts.addItem(i)}if(void 0!==n){if("number"==typeof n)-1===i.dbIds.indexOf(n)&&i.dbIds.push(n);else if(n)for(var f=0;f<n.length;f++){var g=n[f];-1===i.dbIds.indexOf(g)&&i.dbIds.push(g)}i.dbIdsChanged=!0}return i}},{key:"forEach",value:function(t){this.pts.forEach(t)}},{key:"delete",value:function(t){this.pts[t.id]=void 0,this.quadTreeVerts&&this.quadTreeVerts.deleteItem(t)}},{key:"compact",value:function(){for(var t=[],e=0,n=this.pts.length;e<n;e++){var i=this.pts[e];i&&(i.oldid=i.id,i.id=t.length,t.push(i))}this.pts=t}},{key:"enumInBox",value:function(t,e,n,i,o){this.quadTreeVerts.enumInBox(t,e,n,i,o)}}])&&s(e.prototype,n),a&&s(e,a),t}()},"./extensions/CompGeom/poly2tri.js":
/*!*****************************************!*\
  !*** ./extensions/CompGeom/poly2tri.js ***!
  \*****************************************/
/*! no static exports found */function(t,e,n){(function(n){var i,o,r,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s=function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){var n=e[s][1][t];return o(n||t)}),u,u.exports,t,e,n,i)}return n[s].exports}for(var r=!1,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){e.exports={version:"1.5.0"}},{}],2:[function(t,e,n){"use strict";var i=function(t,e){this.head_=t,this.tail_=e,this.search_node_=t};i.prototype.head=function(){return this.head_},i.prototype.setHead=function(t){this.head_=t},i.prototype.tail=function(){return this.tail_},i.prototype.setTail=function(t){this.tail_=t},i.prototype.search=function(){return this.search_node_},i.prototype.setSearch=function(t){this.search_node_=t},i.prototype.findSearchNode=function(){return this.search_node_},i.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},i.prototype.locatePoint=function(t){var e=t.x,n=this.findSearchNode(e),i=n.point.x;if(e===i){if(t!==n.point)if(t===n.prev.point)n=n.prev;else{if(t!==n.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");n=n.next}}else if(e<i)for(;(n=n.prev)&&t!==n.point;);else for(;(n=n.next)&&t!==n.point;);return n&&(this.search_node_=n),n},e.exports=i,e.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},{}],3:[function(t,e,n){"use strict";e.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},{}],4:[function(t,e,n){"use strict";var i=t("./xy"),o=function(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null};o.prototype.toString=function(){return i.toStringBase(this)},o.prototype.toJSON=function(){return{x:this.x,y:this.y}},o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.set_zero=function(){return this.x=0,this.y=0,this},o.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},o.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.mul=function(t){return this.x*=t,this.y*=t,this},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},o.negate=function(t){return new o(-t.x,-t.y)},o.add=function(t,e){return new o(t.x+e.x,t.y+e.y)},o.sub=function(t,e){return new o(t.x-e.x,t.y-e.y)},o.mul=function(t,e){return new o(t*e.x,t*e.y)},o.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new o(-t*e.y,t*e.x):"number"==typeof e?new o(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},o.toString=i.toString,o.compare=i.compare,o.cmp=i.compare,o.equals=i.equals,o.dot=function(t,e){return t.x*e.x+t.y*e.y},e.exports=o},{"./xy":11}],5:[function(t,e,n){"use strict";var i=t("./xy"),o=function(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var n=0;n<e.length;n++)this.message+=" "+i.toString(e[n])};(o.prototype=new Error).constructor=o,e.exports=o},{"./xy":11}],6:[function(t,e,i){(function(e){"use strict";var n=e.poly2tri;i.noConflict=function(){return e.poly2tri=n,i},i.VERSION=t("../dist/version.json").version,i.PointError=t("./pointerror"),i.Point=t("./point"),i.Triangle=t("./triangle"),i.SweepContext=t("./sweepcontext");var o=t("./sweep");i.triangulate=o.triangulate,i.sweep={Triangulate:o.triangulate}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dist/version.json":1,"./point":4,"./pointerror":5,"./sweep":7,"./sweepcontext":8,"./triangle":9}],7:[function(t,e,n){"use strict";var i=t("./assert"),o=t("./pointerror"),r=t("./triangle"),s=t("./advancingfront").Node,a=t("./utils"),h=a.EPSILON,u=a.Orientation,l=a.orient2d,p=a.inScanArea,d=a.isAngleObtuse;function c(t,e){var n=t.locateNode(e),o=function(t,e,n){var i=new r(e,n.point,n.next.point);i.markNeighbor(n.triangle),t.addToMap(i);var o=new s(e);return o.next=n.next,o.prev=n,n.next.prev=o,n.next=o,x(t,i)||t.mapTriangleToNodes(i),o}(t,e,n);return e.x<=n.point.x+h&&y(t,n),function(t,e){for(var n=e.next;n.next&&!d(n.point,n.next.point,n.prev.point);)y(t,n),n=n.next;for(n=e.prev;n.prev&&!d(n.point,n.next.point,n.prev.point);)y(t,n),n=n.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,n=t.point.y-t.next.next.point.y;return i(n>=0,"unordered y"),e>=0||Math.abs(e)<n}(e)&&function(t,e){for(l(e.point,e.next.point,e.next.next.point)===u.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next,t.basin.bottom_node=t.basin.left_node;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node!==t.basin.left_node){for(t.basin.right_node=t.basin.bottom_node;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;t.basin.right_node!==t.basin.bottom_node&&(t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,function t(e,n){if(!function(t,e){var n;return n=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y,t.basin.width>n}(e,n)&&(y(e,n),n.prev!==e.basin.left_node||n.next!==e.basin.right_node)){if(n.prev===e.basin.left_node){if(l(n.point,n.next.point,n.next.next.point)===u.CW)return;n=n.next}else if(n.next===e.basin.right_node){if(l(n.point,n.prev.point,n.prev.prev.point)===u.CCW)return;n=n.prev}else n=n.prev.point.y<n.next.point.y?n.prev:n.next;t(e,n)}}(t,t.basin.bottom_node))}}(t,e)}(t,o),o}function f(t,e,n){t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,v(n.triangle,e.p,e.q)||(function(t,e,n){t.edge_event.right?function(t,e,n){for(;n.next.point.x<e.p.x;)l(e.q,n.next.point,e.p)===u.CCW?_(t,e,n):n=n.next}(t,e,n):function(t,e,n){for(;n.prev.point.x>e.p.x;)l(e.q,n.prev.point,e.p)===u.CW?E(t,e,n):n=n.prev}(t,e,n)}(t,e,n),g(t,e.p,e.q,n.triangle,e.q))}function g(t,e,n,i,r){if(!v(i,e,n)){var s=i.pointCCW(r),a=l(n,s,e);if(a===u.COLLINEAR)throw new o("poly2tri EdgeEvent: Collinear not supported!",[n,s,e]);var h=i.pointCW(r),p=l(n,h,e);if(p===u.COLLINEAR)throw new o("poly2tri EdgeEvent: Collinear not supported!",[n,h,e]);a===p?g(t,e,n,i=a===u.CW?i.neighborCCW(r):i.neighborCW(r),r):P(t,e,n,i,r)}}function v(t,e,n){var i=t.edgeIndex(e,n);if(-1!==i){t.markConstrainedEdgeByIndex(i);var o=t.getNeighbor(i);return o&&o.markConstrainedEdgeByPoints(e,n),!0}return!1}function y(t,e){var n=new r(e.prev.point,e.point,e.next.point);n.markNeighbor(e.prev.triangle),n.markNeighbor(e.triangle),t.addToMap(n),e.prev.next=e.next,e.next.prev=e.prev,x(t,n)||t.mapTriangleToNodes(n)}function x(t,e){for(var n=0;n<3;++n)if(!e.delaunay_edge[n]){var i=e.getNeighbor(n);if(i){var o=e.getPoint(n),r=i.oppositePoint(e,o),s=i.index(r);if(i.constrained_edge[s]||i.delaunay_edge[s]){e.constrained_edge[n]=i.constrained_edge[s];continue}if(m(o,e.pointCCW(o),e.pointCW(o),r)){e.delaunay_edge[n]=!0,i.delaunay_edge[s]=!0,b(e,o,i,r);var a=!x(t,e);return a&&t.mapTriangleToNodes(e),(a=!x(t,i))&&t.mapTriangleToNodes(i),e.delaunay_edge[n]=!1,i.delaunay_edge[s]=!1,!0}}}return!1}function m(t,e,n,i){var o=t.x-i.x,r=t.y-i.y,s=e.x-i.x,a=e.y-i.y,h=o*a-s*r;if(h<=0)return!1;var u=n.x-i.x,l=n.y-i.y,p=u*r-o*l;return!(p<=0)&&(o*o+r*r)*(s*l-u*a)+(s*s+a*a)*p+(u*u+l*l)*h>0}function b(t,e,n,i){var o,r,s,a,h,u,l,p,d,c,f,g;o=t.neighborCCW(e),r=t.neighborCW(e),s=n.neighborCCW(i),a=n.neighborCW(i),h=t.getConstrainedEdgeCCW(e),u=t.getConstrainedEdgeCW(e),l=n.getConstrainedEdgeCCW(i),p=n.getConstrainedEdgeCW(i),d=t.getDelaunayEdgeCCW(e),c=t.getDelaunayEdgeCW(e),f=n.getDelaunayEdgeCCW(i),g=n.getDelaunayEdgeCW(i),t.legalize(e,i),n.legalize(i,e),n.setDelaunayEdgeCCW(e,d),t.setDelaunayEdgeCW(e,c),t.setDelaunayEdgeCCW(i,f),n.setDelaunayEdgeCW(i,g),n.setConstrainedEdgeCCW(e,h),t.setConstrainedEdgeCW(e,u),t.setConstrainedEdgeCCW(i,l),n.setConstrainedEdgeCW(i,p),t.clearNeighbors(),n.clearNeighbors(),o&&n.markNeighbor(o),r&&t.markNeighbor(r),s&&t.markNeighbor(s),a&&n.markNeighbor(a),t.markNeighbor(n)}function _(t,e,n){n.point.x<e.p.x&&(l(n.point,n.next.point,n.next.next.point)===u.CCW?C(t,e,n):(function t(e,n,i){l(i.next.point,i.next.next.point,i.next.next.next.point)===u.CCW?C(e,n,i.next):l(n.q,i.next.next.point,n.p)===u.CCW&&t(e,n,i.next)}(t,e,n),_(t,e,n)))}function C(t,e,n){y(t,n.next),n.next.point!==e.p&&l(e.q,n.next.point,e.p)===u.CCW&&l(n.point,n.next.point,n.next.next.point)===u.CCW&&C(t,e,n)}function E(t,e,n){n.point.x>e.p.x&&(l(n.point,n.prev.point,n.prev.prev.point)===u.CW?w(t,e,n):(function t(e,n,i){l(i.prev.point,i.prev.prev.point,i.prev.prev.prev.point)===u.CW?w(e,n,i.prev):l(n.q,i.prev.prev.point,n.p)===u.CW&&t(e,n,i.prev)}(t,e,n),E(t,e,n)))}function w(t,e,n){y(t,n.prev),n.prev.point!==e.p&&l(e.q,n.prev.point,e.p)===u.CW&&l(n.point,n.prev.point,n.prev.prev.point)===u.CW&&w(t,e,n)}function P(t,e,n,r,s){var a=r.neighborAcross(s);i(a,"FLIP failed due to missing triangle!");var h=a.oppositePoint(r,s);if(r.getConstrainedEdgeAcross(s)){var d=r.index(s);throw new o("poly2tri Intersecting Constraints",[s,h,r.getPoint((d+1)%3),r.getPoint((d+2)%3)])}p(s,r.pointCCW(s),r.pointCW(s),h)?(b(r,s,a,h),t.mapTriangleToNodes(r),t.mapTriangleToNodes(a),s===n&&h===e?n===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(r.markConstrainedEdgeByPoints(e,n),a.markConstrainedEdgeByPoints(e,n),x(t,r),x(t,a)):P(t,e,n,r=function(t,e,n,i,o,r){var s;return e===u.CCW?(s=i.edgeIndex(o,r),i.delaunay_edge[s]=!0,x(t,i),i.clearDelaunayEdges(),n):(s=n.edgeIndex(o,r),n.delaunay_edge[s]=!0,x(t,n),n.clearDelaunayEdges(),i)}(t,l(n,h,e),r,a,s,h),s)):(function t(e,n,o,r,s,a){var h=s.neighborAcross(a);i(h,"FLIP failed due to missing triangle");var u=h.oppositePoint(s,a);if(p(o,r.pointCCW(o),r.pointCW(o),u))P(e,o,u,h,u);else{var l=T(n,o,h,u);t(e,n,o,r,h,l)}}(t,e,n,r,a,T(e,n,a,h)),g(t,e,n,r,s))}function T(t,e,n,i){var r=l(e,i,t);if(r===u.CW)return n.pointCCW(i);if(r===u.CCW)return n.pointCW(i);throw new o("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,i,t])}n.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,n=t.pointCount();for(e=1;e<n;++e)for(var i=t.getPoint(e),o=c(t,i),r=i._p2t_edge_list,s=0;r&&s<r.length;++s)f(t,r[s],o)}(t),function(t){for(var e=t.front().head().next.triangle,n=t.front().head().next.point;!e.getConstrainedEdgeCW(n);)e=e.neighborCCW(n);t.meshClean(e)}(t)}},{"./advancingfront":2,"./assert":3,"./pointerror":5,"./triangle":9,"./utils":10}],8:[function(t,e,n){"use strict";var i=t("./pointerror"),o=t("./point"),r=t("./triangle"),s=t("./sweep"),a=t("./advancingfront"),h=a.Node,u=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new i("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},l=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};l.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var p=function(){this.constrained_edge=null,this.right=!1},d=function(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new l,this.edge_event=new p,this.initEdges(this.points_)};d.prototype.addHole=function(t){this.initEdges(t);var e,n=t.length;for(e=0;e<n;e++)this.points_.push(t[e]);return this},d.prototype.AddHole=d.prototype.addHole,d.prototype.addHoles=function(t){var e,n=t.length;for(e=0;e<n;e++)this.initEdges(t[e]);return this.points_=this.points_.concat.apply(this.points_,t),this},d.prototype.addPoint=function(t){return this.points_.push(t),this},d.prototype.AddPoint=d.prototype.addPoint,d.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},d.prototype.triangulate=function(){return s.triangulate(this),this},d.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},d.prototype.getTriangles=function(){return this.triangles_},d.prototype.GetTriangles=d.prototype.getTriangles,d.prototype.front=function(){return this.front_},d.prototype.pointCount=function(){return this.points_.length},d.prototype.head=function(){return this.head_},d.prototype.setHead=function(t){this.head_=t},d.prototype.tail=function(){return this.tail_},d.prototype.setTail=function(t){this.tail_=t},d.prototype.getMap=function(){return this.map_},d.prototype.initTriangulation=function(){var t,e=this.points_[0].x,n=this.points_[0].x,i=this.points_[0].y,r=this.points_[0].y,s=this.points_.length;for(t=1;t<s;t++){var a=this.points_[t];a.x>e&&(e=a.x),a.x<n&&(n=a.x),a.y>i&&(i=a.y),a.y<r&&(r=a.y)}this.pmin_=new o(n,r),this.pmax_=new o(e,i);var h=.3*(e-n),u=.3*(i-r);this.head_=new o(e+h,r-u),this.tail_=new o(n-h,r-u),this.points_.sort(o.compare)},d.prototype.initEdges=function(t,e){var n,i=t.length,o=e?t.length-1:t.length;for(n=0;n<o;++n)this.edge_list.push(new u(t[n],t[(n+1)%i]))},d.prototype.getPoint=function(t){return this.points_[t]},d.prototype.addToMap=function(t){this.map_.push(t)},d.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},d.prototype.createAdvancingFront=function(){var t,e,n,i=new r(this.points_[0],this.tail_,this.head_);this.map_.push(i),t=new h(i.getPoint(1),i),e=new h(i.getPoint(0),i),n=new h(i.getPoint(2)),this.front_=new a(t,n),t.next=e,e.next=n,e.prev=t,n.prev=e},d.prototype.removeNode=function(t){},d.prototype.mapTriangleToNodes=function(t){for(var e=0;e<3;++e)if(!t.getNeighbor(e)){var n=this.front_.locatePoint(t.pointCW(t.getPoint(e)));n&&(n.triangle=t)}},d.prototype.removeFromMap=function(t){var e,n=this.map_,i=n.length;for(e=0;e<i;e++)if(n[e]===t){n.splice(e,1);break}},d.prototype.meshClean=function(t){for(var e,n,i=[t];e=i.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),n=0;n<3;n++)e.constrained_edge[n]||i.push(e.getNeighbor(n))},e.exports=d},{"./advancingfront":2,"./point":4,"./pointerror":5,"./sweep":7,"./triangle":9}],9:[function(t,e,n){"use strict";var i=function(t,e,n){this.points_=[t,e,n],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},o=t("./xy").toString;i.prototype.toString=function(){return"["+o(this.points_[0])+o(this.points_[1])+o(this.points_[2])+"]"},i.prototype.getPoint=function(t){return this.points_[t]},i.prototype.GetPoint=i.prototype.getPoint,i.prototype.getPoints=function(){return this.points_},i.prototype.getNeighbor=function(t){return this.neighbors_[t]},i.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},i.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},i.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},i.prototype.isInterior=function(){return this.interior_},i.prototype.setInterior=function(t){return this.interior_=t,this},i.prototype.markNeighborPointers=function(t,e,n){var i=this.points_;if(t===i[2]&&e===i[1]||t===i[1]&&e===i[2])this.neighbors_[0]=n;else if(t===i[0]&&e===i[2]||t===i[2]&&e===i[0])this.neighbors_[1]=n;else{if(!(t===i[0]&&e===i[1]||t===i[1]&&e===i[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=n}},i.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t,t.markNeighborPointers(e[1],e[2],this)):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t,t.markNeighborPointers(e[0],e[2],this)):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t,t.markNeighborPointers(e[0],e[1],this))},i.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},i.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},i.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},i.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},i.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},i.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},i.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},i.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},i.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},i.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},i.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},i.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},i.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},i.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},i.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},i.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},i.prototype.oppositePoint=function(t,e){var n=t.pointCW(e);return this.pointCW(n)},i.prototype.legalize=function(t,e){var n=this.points_;if(t===n[0])n[1]=n[0],n[0]=n[2],n[2]=e;else if(t===n[1])n[2]=n[1],n[1]=n[0],n[0]=e;else{if(t!==n[2])throw new Error("poly2tri Invalid Triangle.legalize() call");n[0]=n[2],n[2]=n[1],n[1]=e}},i.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},i.prototype.edgeIndex=function(t,e){var n=this.points_;if(t===n[0]){if(e===n[1])return 2;if(e===n[2])return 1}else if(t===n[1]){if(e===n[2])return 0;if(e===n[0])return 2}else if(t===n[2]){if(e===n[0])return 1;if(e===n[1])return 0}return-1},i.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},i.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},i.prototype.markConstrainedEdgeByPoints=function(t,e){var n=this.points_;e===n[0]&&t===n[1]||e===n[1]&&t===n[0]?this.constrained_edge[2]=!0:e===n[0]&&t===n[2]||e===n[2]&&t===n[0]?this.constrained_edge[1]=!0:(e===n[1]&&t===n[2]||e===n[2]&&t===n[1])&&(this.constrained_edge[0]=!0)},e.exports=i},{"./xy":11}],10:[function(t,e,n){"use strict";n.EPSILON=1e-12;var i={CW:1,CCW:-1,COLLINEAR:0};n.Orientation=i,n.orient2d=function(t,e,n){var o=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);return o>-1e-12&&o<1e-12?i.COLLINEAR:o>0?i.CCW:i.CW},n.inScanArea=function(t,e,n,i){return!((t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)>=-1e-12||(t.x-n.x)*(i.y-n.y)-(i.x-n.x)*(t.y-n.y)<=1e-12)},n.isAngleObtuse=function(t,e,n){var i=e.x-t.x,o=e.y-t.y;return i*(n.x-t.x)+o*(n.y-t.y)<0}},{}],11:[function(t,e,n){"use strict";function i(t){return"("+t.x+";"+t.y+")"}e.exports={toString:function(t){var e=t.toString();return"[object Object]"===e?i(t):e},toStringBase:i,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},{}]},{},[6])(6)},"object"===a(e)&&void 0!==t?t.exports=s():(o=[],void 0===(r="function"==typeof(i=s)?i.apply(e,o):i)||(t.exports=r))}).call(this,n(/*! ./../../node_modules/webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./extensions/CompGeom/quad-tree.js":
/*!******************************************!*\
  !*** ./extensions/CompGeom/quad-tree.js ***!
  \******************************************/
/*! exports provided: QuadTree */function(t,e,n){"use strict";n.r(e),n.d(e,"QuadTree",(function(){return h}));var i=n(/*! ./x-line-box */"./extensions/CompGeom/x-line-box.js"),o=n(/*! ./x-box-box */"./extensions/CompGeom/x-box-box.js");function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=Bimfish.Viewing.Private.logger,a={x:0,y:0},h=function(){function t(e,n,i,o,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[],this.children=null,this.itemCount=0,this.extraDistance=r,this.minx=e,this.miny=n,this.maxx=i,this.maxy=o,this.itemHandler=s}var e,n,h;return e=t,(n=[{key:"addItem",value:function(t){if(this.itemCount++,this.children){for(var e=0,n=null,i=0;i<4;i++)this.children[i].intersectsItem(t)&&(n=this.children[i],e++);0===e||(1===e?n.addItem(t):this.items.push(t))}else this.items.push(t),this.items.length>16&&this.subdivide();return this.itemCount}},{key:"deleteItem",value:function(t){if(!this.intersectsItem(t))return 0;if(this.items){var e=this.items.indexOf(t);if(e>=0)return this.items.splice(e,1),this.itemCount--,1}if(this.children){for(var n=0,i=0;i<4;i++)n+=this.children[i].deleteItem(t),this.children[i].itemCount;return 1===n?(this.itemCount--,1):(s.warn("Did not find item to delete. Something is wrong.",n),0)}return 0}},{key:"intersectsBox",value:function(t,e,n,i){var r=this.extraDistance;return Object(o.xBoxBox)(t,e,n,i,this.minx-r,this.miny-r,this.maxx+r,this.maxy+r)}},{key:"intersectsItem",value:function(t){return this.itemHandler?this.itemHandler.intersectsBox(t,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):t.v1?Object(i.xLineBox)(t.v1.x,t.v1.y,t.v2.x,t.v2.y,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):this.intersectsBox(t.x,t.y,t.x,t.y)}},{key:"findSplitPoint",value:function(){var t=[],e=[];if(this.itemHandler)for(var n=0;n<this.items.length;n++)this.itemHandler.getPoint(this.items[n],a),t.push(a.x),e.push(a.y);else if(this.items[0].v1)for(var i=0;i<this.items.length;i++)t.push(this.items[i].v1.x),e.push(this.items[i].v1.y);else for(var o=0;o<this.items.length;o++)t.push(this.items[o].x),e.push(this.items[o].y);t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e}));var r=t[0|(t.length+1)/2]-this.extraDistance-1e-20,s=e[0|(e.length+1)/2]-this.extraDistance-1e-20;return r<=this.minx||r>=this.maxx||s<=this.miny||s>=this.maxy?null:{midx:r,midy:s}}},{key:"subdivide",value:function(){if(this.children)s.error("Attempt to subdivide already split node");else if(this.items.length){var e=this.minx,n=this.miny,i=this.maxx,o=this.maxy,r=this.findSplitPoint();if(r){var a=r.midx,h=r.midy;this.children=new Array(4),this.children[0]=new t(e,n,a,h,this.extraDistance,this.itemHandler),this.children[1]=new t(a,n,i,h,this.extraDistance,this.itemHandler),this.children[2]=new t(a,h,i,o,this.extraDistance,this.itemHandler),this.children[3]=new t(e,h,a,o,this.extraDistance,this.itemHandler);for(var u=[],l=0,p=this.items.length;l<p;l++){for(var d=0,c=null,f=0;f<4;f++)this.children[f].intersectsItem(this.items[l])&&(c=this.children[f],d++);0===d?s.error("Expected at least one overlap"):1===d?c.addItem(this.items[l]):u.push(this.items[l])}this.items=u}}else s.error("Attempt to subdivide empty node")}},{key:"enumNearItems",value:function(t,e){if(this.intersectsItem(t)){if(this.items)for(var n=0;n<this.items.length;n++)e(this.items[n]);if(this.children)for(var i=0;i<4;i++)this.children[i].enumNearItems(t,e)}}},{key:"enumInBox",value:function(t,e,n,r,s){if(this.intersectsBox(t,e,n,r)){if(this.items)for(var a=0;a<this.items.length;a++){var h=this.items[a];this.itemHandler?this.itemHandler.intersectsBox(h,t,e,n,r)&&s(h):h.v1?Object(i.xLineBox)(h.v1.x,h.v1.y,h.v2.x,h.v2.y,t,e,n,r)&&s(h):Object(o.xBoxBox)(h.x,h.y,h.x,h.y,t,e,n,r)&&s(h)}if(this.children)for(var u=0;u<4;u++)this.children[u].enumInBox(t,e,n,r,s)}}},{key:"pointInPolygonRec",value:function(t,e,n){var i=t.v1.x,o=t.v1.y,r=o>=n,s=t.v2.x,a=t.v2.y,h=a>=n;r!=h&&(a-n)*(i-s)>=(s-e)*(o-a)==h&&(this.pipResult=!this.pipResult)}},{key:"pointInPolygon",value:function(t,e){var n=this;return this.pipResult=!1,this.enumInBox(-1/0,e,1/0,e,(function(i){n.pointInPolygonRec(i,t,e)})),this.pipResult}}])&&r(e.prototype,n),h&&r(e,h),t}()},"./extensions/CompGeom/x-box-box.js":
/*!******************************************!*\
  !*** ./extensions/CompGeom/x-box-box.js ***!
  \******************************************/
/*! exports provided: xBoxBox */function(t,e,n){"use strict";function i(t,e,n,i,o,r,s,a){return t<=s&&e<=a&&n>=o&&i>=r}n.r(e),n.d(e,"xBoxBox",(function(){return i}))},"./extensions/CompGeom/x-box-plane.js":
/*!********************************************!*\
  !*** ./extensions/CompGeom/x-box-plane.js ***!
  \********************************************/
/*! exports provided: xBoxPlane */function(t,e,n){"use strict";n.r(e),n.d(e,"xBoxPlane",(function(){return o}));var i=new THREE.Vector3;function o(t,e){i.set(e.min.x,e.min.y,e.min.z);var n=t.distanceToPoint(i),o=Math.sign(n);i.set(e.min.x,e.min.y,e.max.z);var r=t.distanceToPoint(i);return Math.sign(r)!==o||(i.set(e.min.x,e.max.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.min.x,e.max.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.min.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.min.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.max.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.max.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o))))))}},"./extensions/CompGeom/x-line-box.js":
/*!*******************************************!*\
  !*** ./extensions/CompGeom/x-line-box.js ***!
  \*******************************************/
/*! exports provided: xLineBox */function(t,e,n){"use strict";n.r(e),n.d(e,"xLineBox",(function(){return o}));function i(t,e,n,i,o,r){var s;return s=0,t<n?s|=1:t>o&&(s|=2),e<i?s|=4:e>r&&(s|=8),s}function o(t,e,n,o,r,s,a,h){for(var u=i(t,e,r,s,a,h),l=i(n,o,r,s,a,h),p=!1;;){if(!(u|l)){p=!0;break}if(u&l)break;var d=void 0,c=void 0,f=u||l;8&f?(d=t+(n-t)*(h-e)/(o-e),c=h):4&f?(d=t+(n-t)*(s-e)/(o-e),c=s):2&f?(c=e+(o-e)*(a-t)/(n-t),d=a):1&f&&(c=e+(o-e)*(r-t)/(n-t),d=r),f===u?u=i(t=d,e=c,r,s,a,h):l=i(n=d,o=c,r,s,a,h)}return p}},"./extensions/CompGeom/x-line-line.js":
/*!********************************************!*\
  !*** ./extensions/CompGeom/x-line-line.js ***!
  \********************************************/
/*! exports provided: ONE_INTERSECTION, OVERLAP, pointOnLine, segmentsIntersect */function(t,e,n){"use strict";function i(t){return Math.abs(t)}n.r(e),n.d(e,"ONE_INTERSECTION",(function(){return r})),n.d(e,"OVERLAP",(function(){return s})),n.d(e,"pointOnLine",(function(){return a})),n.d(e,"segmentsIntersect",(function(){return h}));var o=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js").TOL,r=4,s=5;function a(t,e,n,i,r,s){if(n.length<o)return!1;var a=(t-n.v1.x)*n.dx+(e-n.v1.y)*n.dy;r||(r=o*n.length);var h=a/n.length2;if(i&&(h*n.length<-r||h*n.length>n.length+r))return!1;var u=n.v1.x+h*n.dx,l=n.v1.y+h*n.dy,p=(u-t)*(u-t)+(l-e)*(l-e);return s&&(s.x=u,s.y=l,s.d=Math.sqrt(p),s.u=h),p<r*r}function h(t,e,n){var h=e.dy*t.dx-e.dx*t.dy,u=e.dx*(t.v1.y-e.v1.y)-e.dy*(t.v1.x-e.v1.x),l=t.dx*(t.v1.y-e.v1.y)-t.dy*(t.v1.x-e.v1.x);if(i(u)<o&&i(l)<o&&i(h)<o)return null;if(i(h)<o)return function(t,e,n){if(!a(e.v1.x,e.v1.y,t,!1,n))return null;var i={status:s,e1:[],e2:[]},o=a(e.v1.x,e.v1.y,t,!0,n),r=a(e.v2.x,e.v2.y,t,!0,n);if(o&&r)return i.e1.push(e.v1.x,e.v1.y,e.v2.x,e.v2.y),i;var h=a(t.v1.x,t.v1.y,e,!0,n),u=a(t.v2.x,t.v2.y,e,!0,n);return o&&i.e1.push(e.v1.x,e.v1.y),r&&i.e1.push(e.v2.x,e.v2.y),h&&i.e2.push(t.v1.x,t.v1.y),u&&i.e2.push(t.v2.x,t.v2.y),i}(t,e,n);var p=u/h,d=p*t.length;if(d<-n||d>t.length+n)return null;var c=l/h*e.length;if(c<-n||c>e.length+n)return null;var f=t.v1.x+p*t.dx,g=t.v1.y+p*t.dy;return{status:r,e1:[f,g],e2:[f,g]}}},"./extensions/CompGeom/x-mesh-plane.js":
/*!*********************************************!*\
  !*** ./extensions/CompGeom/x-mesh-plane.js ***!
  \*********************************************/
/*! exports provided: xMeshPlane, makePlaneBasis, convertToPlaneCoords */function(t,e,n){"use strict";n.r(e),n.d(e,"xMeshPlane",(function(){return h})),n.d(e,"makePlaneBasis",(function(){return u})),n.d(e,"convertToPlaneCoords",(function(){return l}));var i=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),o=n(/*! ./x-triangle-plane */"./extensions/CompGeom/x-triangle-plane.js"),r=Bimfish.Viewing.Private.VertexEnumerator,s=new THREE.Matrix4,a=new THREE.Plane;function h(t,e,n){var i=e.geometry;if(i){var h=n.length,u=e.matrixWorld;s.getInverse(u),a.copy(t).applyMatrix4(s),r.enumMeshTriangles(i,(function(t,i,r,s,h,u){Object(o.xTrianglePlane)(a,t,i,r,s,h,u,n,e.fragId)}));for(var l=h,p=n.length;l<p;l++)n[l].v1.applyMatrix4(u),n[l].v2.applyMatrix4(u)}}function u(t){var e=new THREE.Vector3(0,0,1),n=t.normal.clone().cross(e);n=n.normalize();var o,r,s,a,h,u,l,p,d,c,f=e.dot(t.normal),g=new THREE.Matrix4;return Object(i.isZero)(n.x)&&Object(i.isZero)(n.y)&&Object(i.isZero)(n.z)?g.elements[14]=f*t.constant:(o=n,r=g,s=f,a=Math.sqrt(1-s*s),h=1-s,u=o.x,l=o.y,p=o.z,d=h*u,c=h*l,r.set(d*u+s,d*l-a*p,d*p+a*l,0,d*l+a*p,c*l+s,c*p-a*u,0,d*p-a*l,c*p+a*u,h*p*p+s,0,0,0,0,1),g.elements[14]=t.constant),g}function l(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];o.v1.applyMatrix4(t),o.v2.applyMatrix4(t),n.expandByPoint(o.v1),n.expandByPoint(o.v2)}}},"./extensions/CompGeom/x-plane-segment.js":
/*!************************************************!*\
  !*** ./extensions/CompGeom/x-plane-segment.js ***!
  \************************************************/
/*! exports provided: xPlaneSegment */function(t,e,n){"use strict";n.r(e),n.d(e,"xPlaneSegment",(function(){return r}));var i=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),o=new THREE.Vector3;function r(t,e,n,r,s){var a=o.subVectors(n,e),h=t.normal.dot(a);if(Object(i.isZero)(h))return r.copy(e),s.copy(n),2;h=1/h;var u=-(e.dot(t.normal)*h+t.constant*h);if(u<-i.TOL||u>1+i.TOL)return 0;var l=a.multiplyScalar(u).add(e);return r.copy(l),1}},"./extensions/CompGeom/x-triangle-plane.js":
/*!*************************************************!*\
  !*** ./extensions/CompGeom/x-triangle-plane.js ***!
  \*************************************************/
/*! exports provided: xTrianglePlane */function(t,e,n){"use strict";n.r(e),n.d(e,"xTrianglePlane",(function(){return u}));var i=n(/*! ./fuzzy-math */"./extensions/CompGeom/fuzzy-math.js"),o=n(/*! ./x-plane-segment */"./extensions/CompGeom/x-plane-segment.js"),r=Bimfish.Viewing.Private.logger;function s(t,e,n,i,o,r,s){this.v1=t.clone(),this.v2=e.clone()}var a=new THREE.Vector3,h=new THREE.Vector3;function u(t,e,n,u,l,p,d,c,f){var g=t.distanceToPoint(e),v=t.distanceToPoint(n),y=t.distanceToPoint(u);if(g<-i.TOL&&v<-i.TOL&&y<-i.TOL)return null;if(g>i.TOL&&v>i.TOL&&y>i.TOL)return null;var x,m,b,_,C,E,w=Math.sign(g),P=Math.sign(v),T=Math.sign(y);if(0===w&&0===P&&0===T)return null;if(w!==P){var k=Object(o.xPlaneSegment)(t,e,n,a,h);if(2===k)return void c.push(new s(e,n,l,l,p,p,f));1===k?(b=l,_=p,x=a.clone()):r.warn("Unexpected zero intersections where at least one was expected")}if(P!==T){var I=Object(o.xPlaneSegment)(t,n,u,a,h);if(2===I)return void c.push(new s(n,u,p,p,d,d,f));1===I?x?a.distanceTo(x)>i.TOL&&(C=p,E=d,m=a.clone()):(b=p,_=d,x=a.clone()):r.warn("Unexpected zero intersections where at least one was expected")}if(T!==w){var O=Object(o.xPlaneSegment)(t,u,e,a,h);if(2===O)return void c.push(new s(u,e,d,d,l,l,f));1===O?x?a.distanceTo(x)>i.TOL&&(C=d,E=l,m=a.clone()):r.warn("Unexpected single intersection point"):r.warn("Unexpected zero intersections where at least one was expected")}x&&m&&c.push(new s(x,m,b,_,C,E,f))}},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}});