/*!
 * LMV v7.9.0
 * 
 * Copyright 2019 Bimfish, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Bimfish, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Bimfish, Inc.
 * 
 * Bimfish Forge Viewer Usage Limitations:
 * 
 * The Bimfish Forge viewer can only be used to view files generated by
 * Bimfish Forge services. The Bimfish Forge Viewer JavaScript must be
 * delivered from an Bimfish hosted URL.
 */
Bimfish.Extensions.SceneBuilder=function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./extensions/SceneBuilder/sceneBuilder.js")}({"./extensions/SceneBuilder/modelBuilder.js":
/*!*************************************************!*\
  !*** ./extensions/SceneBuilder/modelBuilder.js ***!
  \*************************************************/
/*! exports provided: ModelBuilder */function(e,t,r){"use strict";r.r(t),r.d(t,"ModelBuilder",(function(){return I}));var i=r(/*! ./reusableIds */"./extensions/SceneBuilder/reusableIds.js");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var s=Bimfish.Viewing,l=s.Private,u=new THREE.Matrix4,d=new THREE.Box3,f=new THREE.Vector3,h=new THREE.Vector3,m={svfid:0,boundingBox:new THREE.Box3},c={geometry:null,material:void 0,matrix:u,isLine:!1,isWideLine:!1,isPoint:!1},v=~(l.MeshFlags.MESH_ISLINE|l.MeshFlags.MESH_ISWIDELINE|l.MeshFlags.MESH_ISPOINT),g={type:"removed"},_=function(){function e(t){a(this,e),this.viewer3DImpl=t}return o(e,[{key:"loadFile",value:function(e,t,r,i){i&&i();var a=t.conserveMemory?1:0,n={bbox:(new THREE.Box3).set(t.globalOffset,t.globalOffset),fragments:{length:a,fragId2dbId:{},transforms:a?new Float32Array(12*a):null,boxes:a?new Float32Array(6*a):null},is2d:!1,loadOptions:t||{}},o=new s.Model(n);this.viewer3DImpl._removeLoadingFile(this),o.initialize(),o.loader=this,this.model=o,o.getFragmentList().isFixedSize=!1,r(null,o),this.viewer3DImpl.api.dispatchEvent({type:s.MODEL_ROOT_LOADED_EVENT,svf:n,model:o}),this.viewer3DImpl.onLoadComplete(o)}},{key:"dtor",value:function(){}},{key:"is3d",value:function(){return!0}}]),e}();function y(e){return e instanceof THREE.Mesh?e.fragId:e}function p(e,t,r,i,a,n){var o=y(t),s=e.model,l=e.fragList;m.geometry=(void 0===r?e.fragList.getGeometryId(o):r instanceof THREE.BufferGeometry?r.svfid:r)||0,r=void 0===r?e.fragList.getGeometry(o):e._getGeometry(r);var _=void 0===i?e.fragList.getMaterial(o):e._getMaterial(i),p=!e.conserveMemory&&s.getFragmentList().getVizmesh(o);return p?p.dispatchEvent(g):p=c,p.material=_,o<l.vizflags.length&&(l.vizflags[o]&=~v),p.geometry=r,r?(p.isLine=r.isLines,p.isWideLine=r.isWideLines,p.isPoint=r.isPoints):(p.geometry=m,p.isLine=!1,p.isWideLine=!1,p.isPoint=!1),p.matrix=function(e,t){if(!e)return t.identity();if(e instanceof THREE.Matrix4)return e;var r=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=e[9],r[13]=e[10],r[14]=e[11],r[15]=1,t}(a,p===c?u:p.matrix),c.bbox=n&&(n instanceof THREE.Box3?n:d.set(f.fromArray(n,0),h.fromArray(n,3))),s.setFragment(o,p,p!==c),l.useThreeMesh&&!r&&(l.getVizmesh(o).geometry=null),e.sceneUpdated(!0),!0}function b(e,t){return t.makeEmpty(),l.VertexEnumerator.enumMeshVertices(e,(function(e){t.expandByPoint(e)})),t}function M(e,t,r){r instanceof THREE.MeshPhongMaterial||r instanceof THREE.ShaderMaterial&&r.isPrismMaterial?e.addMaterial(t,r):e.addMaterialNonHDR(t,r)}var I=function(){function e(t,r){a(this,e),this.model=t,this.geomList=t.getGeometryList(),this.fragList=t.getFragmentList(),this.geomIds=new i.ReusableIds(1),this.fragmentIds=new i.ReusableIds(Math.max(t.getData().fragments.length,1)),this.conserveMemory=!(!r||!r.conserveMemory)}return o(e,[{key:"isConservingMemory",value:function(){return this.conserveMemory}},{key:"addGeometry",value:function(e,t){if(e&&void 0!==e.svfid)return 0;var r=this.geomIds.reserveId();if(void 0===r)return 0;if(e){var i=e.boundingBox=e.boundingBox||b(e,this.conserveMemory?d:new THREE.Box3);this.geomList.addGeometry(this.packNormals(e),t,r),this.conserveMemory||(e.boundingBox=i)}return r}},{key:"_updateGeometry",value:function(e,t){var r=this.fragList,i=!1;if(this.conserveMemory)for(var a=r.geomids,n=0;n<a.length;++n)e[a[n]]&&(this.changeFragmentGeometry(n,t),i=!0);else for(var o=r.vizmeshes,s=0;s<o.length;++s){var l=o[s];l&&l.geometry&&e[l.geometry.svfid]&&(this.changeFragmentGeometry(s,t),i=!0)}i&&this.sceneUpdated(!0)}},{key:"_validateGeometry",value:function(e){Array.isArray(e)||(e=[e]);for(var t={},r=this.geomList,i=0;i<e.length;++i){var a=e[i];if(a instanceof THREE.BufferGeometry){if(r.getGeometry(a.svfid)!=a)return null;a=a.svfid}if(!this.geomIds.isIdReserved(a))return null;t[a]=!0}return t}},{key:"changeGeometry",value:function(e,t,r){var i=this._validateGeometry(e);if(!i)return!1;var a=parseInt(Object.keys(i)[0]),n=this.geomList;if(!t||t&&void 0!==t.svfid)return!1;var o=n.getGeometry(a);if(n.removeGeometry(a),void 0===r){r=0;var s=this.fragList;if(s.useThreeMesh){if(o)for(var l=s.vizmeshes,u=0;u<l.length;++u)l[u]&&l[u].geometry===o&&++r}else for(var f=s.geomids,h=0;h<f.length;++h)f[h]===a&&++r;r=r||1}var m=t.boundingBox=t.boundingBox||b(t,this.conserveMemory?d:new THREE.Box3);return n.addGeometry(this.packNormals(t),r,a),this.conserveMemory||(t.boundingBox=m),this._updateGeometry(i,a),o&&(o.svfid=void 0),!0}},{key:"findGeometryFragments",value:function(e){var t=this._validateGeometry(e),r=[],i=this.fragList;if(i.useThreeMesh)for(var a=i.vizmeshes,n=0;n<a.length;++n){t[a[n]&&a[n].geometry&&a[n].geometry.svfid]&&r.push(n)}else for(var o=i.geomids,s=0;s<o.length;++s)t[o[s]]&&r.push(s);return r}},{key:"removeGeometry",value:function(e){var t=this._validateGeometry(e);if(!t)return!1;var r=this.geomList;this._updateGeometry(t,0);for(var i=Object.keys(t),a=0;a<i.length;++a){var n=parseInt(i[a]),o=r.getGeometry(n);o&&(o.svfid=void 0),r.removeGeometry(n),this.geomIds.releaseId(n)}return!0}},{key:"addMaterial",value:function(e,t){if(!t||t.materialManagerName)return!1;e=e||"!!mtl-"+t.id;var r=this.model.loader.viewer3DImpl.matman(),i=r._getMaterialHash(this.model,e);return"__defaultMaterial__"!==e&&!r._materials[i]&&!r._materialsNonHDR[i]&&(t.packedNormals||(t.packedNormals=!0,t.needsUpdate=!0),M(r,i,t),t.materialManagerName=e,!0)}},{key:"_validateMaterials",value:function(e){Array.isArray(e)||(e=[e]);for(var t=this.model.loader.viewer3DImpl.matman(),r=[],i=0;i<e.length;++i){var a=e[i],n=void 0,o=void 0;if(a instanceof THREE.Material){if(n=a,a=a.materialManagerName,o=t._getMaterialHash(this.model,a),n!==(t._materials[o]||t._materialsNonHDR[o]))return null}else if(o=t._getMaterialHash(this.model,a),!(t._materials[o]||t._materialsNonHDR[o]))return null;r.push(o)}return r}},{key:"changeMaterial",value:function(e,t){if(!t||t.materialManagerName)return!1;var r=this._validateMaterials(e);if(!r)return!1;var i=this.model.loader.viewer3DImpl.matman(),a=r[0],n=i._materials[a]||i._materialsNonHDR[a],o=n.materialManagerName;t.packedNormals||(t.packedNormals=!0,t.needsUpdate=!0),M(i,a,t),n.materialManagerName=void 0,t.materialManagerName=o;var s=this.fragList;if(s.useThreeMesh)for(var l=s.vizmeshes,u=0;u<l.length;++u)l[u]&&l[u].material===n&&(l[u].material=t);else{var d=s.materialmap[n.id];void 0!==d&&(s.materialmap[t.id]=d,s.materialIdMap[d]=t)}return!0}},{key:"findMaterial",value:function(e){var t=this.model.loader.viewer3DImpl.matman(),r=t._getMaterialHash(this.model,e);return t._materials[r]||t._materialsNonHDR[r]}},{key:"findMaterialFragments",value:function(e){var t=this._validateMaterials(e);if(!t)return null;for(var r=this.model.loader.viewer3DImpl.matman(),i=this.fragList,a=i.useThreeMesh,n=!1,o={},s=0;s<t.length;++s){var l=r._materials[t[s]]||r._materialsNonHDR[t[s]],u=a?l.id:i.materialmap[l.id];void 0!==u&&(o[u]=!0,n=!0)}var d=[];if(n)if(a)for(var f=i.vizmeshes,h=f.length,m=0;m<h;++m){o[f[m]&&f[m].material&&f[m].material.id]&&d.push(m)}else for(var c=i.materialids,v=c.length,g=0;g<v;++g)o[c[g]]&&d.push(g);return d}},{key:"removeMaterial",value:function(e){var t=this._validateMaterials(e);if(!t)return!1;for(var r=this.model.loader.viewer3DImpl.matman(),i=this.fragList,a=i.useThreeMesh,n={},o=!1,s=0;s<t.length;++s){var l=r._materials[t[s]]||r._materialsNonHDR[t[s]];if(delete r._materials[t[s]],delete r._materialsNonHDR[t[s]],a)n[l.id]=!0,o=!0;else{var u=i.materialmap[l.id];void 0!==u&&(delete i.materialmap[l.id],delete i.materialIdMap[u],n[u]=!0,o=!0)}}if(o)if(a)for(var d=i.vizmeshes,f=0;f<d.length;++f){n[d[f]&&d[f].material&&d[f].material.id]&&i.setMaterial(f,this._getDefaultMaterial())}else for(var h=i.materialids,m=0;m<h.length;++m)n[h[m]]&&i.setMaterial(m,this._getDefaultMaterial());return!0}},{key:"addMesh",value:function(e){if(!e||this.conserveMemory||void 0!==e.modelId||void 0!==e.fragId)return!1;if(!e.geometry||!e.material)return!1;var t=e.geometry.svfid;if(t){if(this.geomList.getGeometry(t)!==e.geometry)return!1}else if(!this.addGeometry(e.geometry))return!1;var r=e.material.materialManagerName;if(r){if(this.findMaterial(r)!==e.material)return!1}else if(!this.addMaterial(void 0,e.material))return t&&this.removeGeometry(t),!1;return this.model.setFragment(this.fragmentIds.reserveId(),e,!0),this.sceneUpdated(!0),!0}},{key:"removeMesh",value:function(e){return!this.conserveMemory&&this.removeFragment(e)}},{key:"updateMesh",value:function(e,t,r){if(t&&r)return!0;Array.isArray(e)||(e=[e]);for(var i,a=0;!(i=e[a]);)if(++a>=e.length)return!0;do{i&&(t||(this.packNormals(i.geometry),i.dispatchEvent(g)),r||i.matrixWorld.copy(i.matrix)),i=e[++a]}while(a<e.length);return this.sceneUpdated(!(t&&r)),!0}},{key:"sceneUpdated",value:function(e,t){this.model.loader.viewer3DImpl.sceneUpdated(e,t)}},{key:"_validateFragment",value:function(e,t,r){if(e instanceof THREE.Mesh){if(!this.fragList.useThreeMesh||this.fragList.getVizmesh(e.fragId)!==e)return!1}else if(!this.fragmentIds.isIdReserved(e))return!1;if(t)if(t instanceof THREE.BufferGeometry){if(t.svfid&&this.geomList.getGeometry(t.svfid)!==t)return!1}else if(!this.geomIds.isIdReserved(t))return!1;if(r)if(r instanceof THREE.Material){if(r.materialManagerName&&this.findMaterial(r.materialManagerName)!==r)return!1}else if(!this.findMaterial(r))return!1;return!0}},{key:"_getGeometry",value:function(e){return e instanceof THREE.BufferGeometry?(e.svfid||this.addGeometry(e),e):this.geomList.getGeometry(e)}},{key:"_getMaterial",value:function(e){return e instanceof THREE.Material?(e.materialManagerName||this.addMaterial(void 0,e),e):this.findMaterial(e)}},{key:"addFragment",value:function(e,t,r,i){var a=this.fragmentIds,n=a.reserveId();return void 0!==n&&this._validateFragment(n,e,t)?p(this,n,e,t,r,i)?n:(a.releaseId(n),0):0}},{key:"changeFragmentGeometry",value:function(e,t,r,i){if(!this._validateFragment(e,t))return!1;var a=y(e);return!!p(this,e,t,void 0,r=r||(this.fragList.getOriginalWorldMatrix(a,u),u),i)}},{key:"_getDefaultMaterial",value:function(){if(this._defaultMaterial)return this._defaultMaterial;var e=this.model.loader.viewer3DImpl.matman(),t=e.defaultMaterial.clone();return t.packedNormals=!0,t.needsUpdate=!0,e.addMaterial(e._getMaterialHash(this.model,"__defaultMaterial__"),t),this._defaultMaterial=t,t.materialManagerName="__defaultMaterial__",t}},{key:"changeFragmentMaterial",value:function(e,t){if(!this._validateFragment(e,void 0,t))return!1;var r=this._getMaterial(t)||this._getDefaultMaterial();return this.fragList.setMaterial(y(e),r),this.sceneUpdated(!1),!0}},{key:"changeFragmentTransform",value:function(e,t,r){if(!t||!this._validateFragment(e))return!1;var i=y(e);return!!this.changeFragmentGeometry(i,this.fragList.getGeometryId(i),t,r)&&(this.sceneUpdated(!0),!0)}},{key:"removeFragment",value:function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)if(!this._validateFragment(e[t]))return!1;for(var r=this.conserveMemory?this.fragList.geomids:this.fragList.vizmeshes,i=this.conserveMemory?0:null,a=0;a<e.length;++a){var n=y(e[a]);this.fragmentIds.releaseId(n),!this.conserveMemory&&r[n]&&(r[n].dispatchEvent(g),r[n].fragId=r[n].modelId=void 0),r[n]=i}return this.sceneUpdated(!0),!0}},{key:"packNormals",value:function(e){var t=e.attributes,r=t.normal;if(!r||3!==r.itemSize)return e;function i(e,t,r,i,a,n){for(var o=Math.atan2,s=1/Math.PI;t<e.length;t+=r,a+=n){var l=.5*(o(e[t+1],e[t])*s+1),u=.5*(e[t+2]+1);i[a]=65535*l|0,i[a+1]=65535*u|0}}if(r.array){var a=Math.floor(r.length/r.itemSize),n=new Uint16Array(2*a);i(r.array,0,3,n,0,2),r.itemSize=2,r.array=n,r.normalize=!0,r.needsUpdate=!0,r.bytesPerItem=2}else{var o=e.vbstride,s=e.vb,u=Math.floor(s.length/o),d=new Float32Array((o-2)*u),f=r.itemOffset;if(f<=0||f+3>=o)for(var h=f<=0?3:0,m=f<=0?1:0,c=o-3,v=0;v<u;++v,h+=3,m+=1)for(var g=0;g<c;++g)d[m++]=s[h++];else for(var _=0,y=0,p=f,b=o-f-3,M=0;M<u;++M){for(var I=0;I<p;++I)d[y++]=s[_++];_+=3,y+=1;for(var w=0;w<b;++w)d[y++]=s[_++]}i(s,f,o,new Uint16Array(d.buffer),2*f,2*(o-2)),e.vbstride-=2,e.vb=d,e.vbNeedsUpdate=!0,t.normal=l.BufferGeometryUtils.findBufferAttribute("normal",{array:null,bytesPerItem:2,itemSize:2,normalize:!0,isPattern:r.isPattern,divisor:r.divisor,offset:r.itemOffset},e.numInstances);for(var E=Object.keys(t),x=0;x<E.length;++x){var k=t[E[x]];!k.array&&k.itemOffset>f&&(t[E[x]]=l.BufferGeometryUtils.findBufferAttribute(E[x],{array:null,bytesPerItem:k.bytesPerItem,itemSize:k.itemSize,normalize:k.normalize,isPattern:k.isPattern,divisor:k.divisor,offset:k.itemOffset-2},e.numInstances))}}return e}}],[{key:"addNewModel",value:function(t,r){return new Promise((function(i,a){var n=Object.assign({},r);n.fileLoader=_,n.globalOffset=n.globalOffset||{x:0,y:0,z:0},t.viewer.loadModel("Dummy",n,(function(t){i(new e(t,n))}),(function(e){a(e)}))}))}}]),e}()},"./extensions/SceneBuilder/reusableIds.js":
/*!************************************************!*\
  !*** ./extensions/SceneBuilder/reusableIds.js ***!
  \************************************************/
/*! exports provided: ReusableIds */function(e,t,r){"use strict";r.r(t),r.d(t,"ReusableIds",(function(){return o}));var i=r(/*! bintrees */"./node_modules/bintrees/index.js");function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=[0,1],o=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lowId=void 0===t?0:0|t,this._highId=void 0===r?4294967295:0|r,this._availableIds=new i.RBTree((function(e,t){return e[0]-t[0]})),this._availableIds.insert([this._lowId+(0|a),this._highId])}var t,r,o;return t=e,(r=[{key:"reserveId",value:function(){var e=this._availableIds.min();if(null!==e){var t=e[0];return t>=e[1]?this._availableIds.remove(e):++e[0],t}}},{key:"releaseId",value:function(e){if(e<this._lowId||e>this._highId)return!1;n[0]=e;var t=this._availableIds.lowerBound(n),r=t.data();if(null!==r){if(r[0]<=e&&r[1]>=e)return!1;t.prev();var i=t.data();e+1===r[0]?null===i||e-1>i[1]?r[0]=e:(this._availableIds.remove(r),this._availableIds.remove(i),r[0]=i[0],this._availableIds.insert(r)):null===i||e-1>i[1]?this._availableIds.insert([e,e]):i[1]=e}return!0}},{key:"isIdReserved",value:function(e){if(e<this._lowId||e>this._highId)return!1;n[0]=e;var t=this._availableIds.upperBound(n).prev();return!t||e<t[0]||e>t[1]}}])&&a(t.prototype,r),o&&a(t,o),e}()},"./extensions/SceneBuilder/sceneBuilder.js":
/*!*************************************************!*\
  !*** ./extensions/SceneBuilder/sceneBuilder.js ***!
  \*************************************************/
/*! no exports provided */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./modelBuilder */"./extensions/SceneBuilder/modelBuilder.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=Bimfish.Viewing,d=function(e){function t(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=o(this,s(t).call(this,e,r)))._loaded=!1,i}var r,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),r=t,(a=[{key:"load",value:function(){return this._loaded=!0,!0}},{key:"unload",value:function(){return this._loaded=!1,!0}},{key:"addNewModel",value:function(e){return this._loaded?i.ModelBuilder.addNewModel(this,Object.assign({},this.options,e)):Promise.reject(new Error("SceneBuilder extension not loaded"))}}])&&n(r.prototype,a),u&&n(r,u),t}(u.Extension);u.theExtensionManager.registerExtension("Bimfish.Viewing.SceneBuilder",d)},"./node_modules/bintrees/index.js":
/*!****************************************!*\
  !*** ./node_modules/bintrees/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){e.exports={RBTree:r(/*! ./lib/rbtree */"./node_modules/bintrees/lib/rbtree.js"),BinTree:r(/*! ./lib/bintree */"./node_modules/bintrees/lib/bintree.js")}},"./node_modules/bintrees/lib/bintree.js":
/*!**********************************************!*\
  !*** ./node_modules/bintrees/lib/bintree.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,r){var i=r(/*! ./treebase */"./node_modules/bintrees/lib/treebase.js");function a(e){this.data=e,this.left=null,this.right=null}function n(e){this._root=null,this._comparator=e,this.size=0}a.prototype.get_child=function(e){return e?this.right:this.left},a.prototype.set_child=function(e,t){e?this.right=t:this.left=t},n.prototype=new i,n.prototype.insert=function(e){if(null===this._root)return this._root=new a(e),this.size++,!0;for(var t=0,r=null,i=this._root;;){if(null===i)return i=new a(e),r.set_child(t,i),ret=!0,this.size++,!0;if(0===this._comparator(i.data,e))return!1;t=this._comparator(i.data,e)<0,r=i,i=i.get_child(t)}},n.prototype.remove=function(e){if(null===this._root)return!1;var t=new a(void 0),r=t;r.right=this._root;for(var i=null,n=null,o=1;null!==r.get_child(o);){i=r,r=r.get_child(o);var s=this._comparator(e,r.data);o=s>0,0===s&&(n=r)}return null!==n&&(n.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this._root=t.right,this.size--,!0)},e.exports=n},"./node_modules/bintrees/lib/rbtree.js":
/*!*********************************************!*\
  !*** ./node_modules/bintrees/lib/rbtree.js ***!
  \*********************************************/
/*! no static exports found */function(e,t,r){var i=r(/*! ./treebase */"./node_modules/bintrees/lib/treebase.js");function a(e){this.data=e,this.left=null,this.right=null,this.red=!0}function n(e){this._root=null,this._comparator=e,this.size=0}function o(e){return null!==e&&e.red}function s(e,t){var r=e.get_child(!t);return e.set_child(!t,r.get_child(t)),r.set_child(t,e),e.red=!0,r.red=!1,r}function l(e,t){return e.set_child(!t,s(e.get_child(!t),!t)),s(e,t)}a.prototype.get_child=function(e){return e?this.right:this.left},a.prototype.set_child=function(e,t){e?this.right=t:this.left=t},n.prototype=new i,n.prototype.insert=function(e){var t=!1;if(null===this._root)this._root=new a(e),t=!0,this.size++;else{var r=new a(void 0),i=0,n=0,u=null,d=r,f=null,h=this._root;for(d.right=this._root;;){if(null===h?(h=new a(e),f.set_child(i,h),t=!0,this.size++):o(h.left)&&o(h.right)&&(h.red=!0,h.left.red=!1,h.right.red=!1),o(h)&&o(f)){var m=d.right===u;h===f.get_child(n)?d.set_child(m,s(u,!n)):d.set_child(m,l(u,!n))}var c=this._comparator(h.data,e);if(0===c)break;n=i,i=c<0,null!==u&&(d=u),u=f,f=h,h=h.get_child(i)}this._root=r.right}return this._root.red=!1,t},n.prototype.remove=function(e){if(null===this._root)return!1;var t=new a(void 0),r=t;r.right=this._root;for(var i=null,n=null,u=null,d=1;null!==r.get_child(d);){var f=d;n=i,i=r,r=r.get_child(d);var h=this._comparator(e,r.data);if(d=h>0,0===h&&(u=r),!o(r)&&!o(r.get_child(d)))if(o(r.get_child(!d))){var m=s(r,d);i.set_child(f,m),i=m}else if(!o(r.get_child(!d))){var c=i.get_child(!f);if(null!==c)if(o(c.get_child(!f))||o(c.get_child(f))){var v=n.right===i;o(c.get_child(f))?n.set_child(v,l(i,f)):o(c.get_child(!f))&&n.set_child(v,s(i,f));var g=n.get_child(v);g.red=!0,r.red=!0,g.left.red=!1,g.right.red=!1}else i.red=!1,c.red=!0,r.red=!0}}return null!==u&&(u.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==u},e.exports=n},"./node_modules/bintrees/lib/treebase.js":
/*!***********************************************!*\
  !*** ./node_modules/bintrees/lib/treebase.js ***!
  \***********************************************/
/*! no static exports found */function(e,t){function r(){}function i(e){this._tree=e,this._ancestors=[],this._cursor=null}r.prototype.clear=function(){this._root=null,this.size=0},r.prototype.find=function(e){for(var t=this._root;null!==t;){var r=this._comparator(e,t.data);if(0===r)return t.data;t=t.get_child(r>0)}return null},r.prototype.findIter=function(e){for(var t=this._root,r=this.iterator();null!==t;){var i=this._comparator(e,t.data);if(0===i)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(i>0)}return null},r.prototype.lowerBound=function(e){for(var t=this._root,r=this.iterator(),i=this._comparator;null!==t;){var a=i(e,t.data);if(0===a)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(a>0)}for(var n=r._ancestors.length-1;n>=0;--n)if(i(e,(t=r._ancestors[n]).data)<0)return r._cursor=t,r._ancestors.length=n,r;return r._ancestors.length=0,r},r.prototype.upperBound=function(e){for(var t=this.lowerBound(e),r=this._comparator;null!==t.data()&&0===r(t.data(),e);)t.next();return t},r.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},r.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},r.prototype.iterator=function(){return new i(this)},r.prototype.each=function(e){for(var t,r=this.iterator();null!==(t=r.next());)if(!1===e(t))return},r.prototype.reach=function(e){for(var t,r=this.iterator();null!==(t=r.prev());)if(!1===e(t))return},i.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},i.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else{var t;if(null===this._cursor.right)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},i.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else{var t;if(null===this._cursor.left)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},i.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},i.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e.exports=r}});